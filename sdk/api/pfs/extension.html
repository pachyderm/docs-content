<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pachyderm_sdk.api.pfs.extension API documentation</title>
<meta name="description" content="" />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pachyderm_sdk.api.pfs.extension</code></h1>
</header>
<section id="section-intro">
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">import io
import os
from contextlib import contextmanager
from dataclasses import fields
from pathlib import Path
from typing import ContextManager, Iterable, List, Union, TYPE_CHECKING

from betterproto.lib.google.protobuf import Empty
import grpc

from . import ApiStub as _GeneratedApiStub
from . import (
    Branch,
    Commit,
    CommitInfo,
    CommitSet,
    CommitState,
    File,
    Project,
    Repo,
    ModifyFileRequest,
    AddFile,
    AddFileUrlSource,
    CopyFile,
    DeleteFile,
)
from .file import PFSFile, PFSTarFile

if TYPE_CHECKING:
    from _typeshed import SupportsRead

BUFFER_SIZE = 19 * 1024 * 1024  # 19MB


class OpenCommit(Commit):
    &#34;&#34;&#34;An OpenCommit is an extension of the pfs.Commit message with some
    helpful methods that provide a more intuitive UX when writing to a commit.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;data@master&#34;)) as commit:
    &gt;&gt;&gt;     commit.put_file_from_bytes(&#34;/greeting.txt&#34;, b&#34;Hello!&#34;)
    &gt;&gt;&gt;     commit.delete_file(&#34;/rude/insult.txt&#34;)
    &gt;&gt;&gt; commit.wait()
    &#34;&#34;&#34;

    def __init__(self, commit: &#34;Commit&#34;, stub: &#34;ApiStub&#34;):
        &#34;&#34;&#34;Internal Use: Do not create this object yourself.

        Parameters
        ----------
        commit : pfs.Commit
            The &#34;open&#34; commit to write to.
        stub : pfs.ApiStub
            The API class to route requests though.
        &#34;&#34;&#34;
        self._commit = commit
        self._stub = stub
        self._open = True

        # This is required to maintain serialization capabilities while being
        #   future compatible with any new fields to the pfs.Commit message.
        super().__init__(**{
            field.name: getattr(commit, field.name)
            for field in fields(commit)
        })

    def wait(self) -&gt; &#34;CommitInfo&#34;:
        &#34;&#34;&#34;Waits until the commit is finished being created.

        This method is intended to be called on a closed commit, but provided
        with this class to be used following the commit context.
        (See example in class docstring)
        &#34;&#34;&#34;
        return self._stub.wait_commit(self)

    def wait_set(self) -&gt; List[&#34;CommitInfo&#34;]:  # TODO: Better name?
        &#34;&#34;&#34;Similar to Commit.wait but streams back the pfs.CommitInfo
        from all the downstream jobs that were initiated by this commit.

        This method is intended to be called on a closed commit, but provided
        with this class to be used following the commit context.
        (See example in class docstring)
        &#34;&#34;&#34;
        return self._stub.wait_commit_set(CommitSet(id=self._commit.id))

    def put_file_from_bytes(
        self,
        path: str,
        data: bytes,
        append: bool = False
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Uploads a PFS file from a bytestring.

        Parameters
        ----------
        path : str
            The path in the repo the data will be written to.
        data : bytes
            The file contents as bytes.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.put_file_from_bytes(path=&#34;/file.txt&#34;, data=b&#34;SOME BYTES&#34;)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot write to a closed commit&#34;)
        self._stub.put_file_from_bytes(
            commit=self, path=path, data=data, append=append
        )
        return File(commit=self._commit, path=path)

    def put_file_from_url(
        self,
        *,
        path: str,
        url: str,
        recursive: bool = False,
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Uploads a PFS file from an url.

        Parameters
        ----------
        path : str
            The path in the repo the data will be written to.
        url : str
            The URL of the file to put.
        recursive : bool
            If true, allows for recursive scraping on some types URLs, for
            example on s3:// URLs

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.put_file_from_url(
        &gt;&gt;&gt;         path=&#34;/index.html&#34;, url=&#34;https://www.pachyderm.com/index.html&#34;
        &gt;&gt;&gt;     )
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot write to a closed commit&#34;)
        self._stub.put_file_from_url(
            commit=self, path=path, url=url, recursive=recursive
        )
        return File(commit=self._commit, path=path)

    def put_file_from_file(
        self,
        *,
        path: str,
        file: &#34;SupportsRead[bytes]&#34;,
        append: bool = False
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Uploads a PFS file from an open file object.

        Parameters
        ----------
        path : str
            The path in the repo the data will be written to.
        file : SupportsRead[bytes]
            An open file object to read the data from.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     with open(&#34;local_file.dat&#34;, &#34;rb&#34;) as source:
        &gt;&gt;&gt;         commit.put_file_from_file(path=&#34;/index.html&#34;, file=source)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot write to a closed commit&#34;)
        self._stub.put_file_from_file(
            commit=self, path=path, file=file, append=append
        )
        return File(commit=self._commit, path=path)

    def copy_file(
        self,
        *,
        src: &#34;File&#34;,
        dst: str,
        append: bool = True
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        src : pfs.File
            This file to be copied.
        dst : str
            The destination of the file, as a string path.
        append : bool
            If true, appends the contents of src to dst if it exists.
            Otherwise, overwrites the file.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/file.dat&#34;)
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.copy_file(src=source, dst=&#34;/copy.dat&#34;)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot modify a closed commit&#34;)
        self._stub.copy_file(commit=self, src=src, dst=dst, append=append)
        return File(commit=self._commit, path=dst)

    def delete_file(self, *, path: str) -&gt; &#34;File&#34;:  # TODO: Should we return anything?
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        path : str
            The path of the file to be deleted.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.delete_file(path=&#34;/file.dat&#34;)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot modify a closed commit&#34;)
        self._stub.delete_file(commit=self, path=path)
        return File(commit=self._commit, path=path)


class ApiStub(_GeneratedApiStub):
    &#34;&#34;&#34;An extension to the API stub generated from the PFS protobufs.&#34;&#34;&#34;

    @contextmanager
    def commit(
        self, *, parent: &#34;Commit&#34; = None, description: str = &#34;&#34;, branch: &#34;Branch&#34; = None
    ) -&gt; ContextManager[&#34;OpenCommit&#34;]:
        &#34;&#34;&#34;A context manager for running operations within a commit.

        Parameters
        ----------
        parent : pfs.Commit
            The parent commit of the new commit. parent may be empty in which case
            the commit that Branch points to will be used as the parent.
            If the branch does not exist, the commit will have no parent.
        description : str, optional
            A description of the commit.
        branch : pfs.Branch
            The branch where the commit is created.

        Yields
        -------
        pfs.Commit
            A protobuf object that represents a commit.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     c.delete_file(c, &#34;/dir/delete_me.txt&#34;)
        &gt;&gt;&gt;     c.put_file_from_bytes(c, &#34;/new_file.txt&#34;, b&#34;DATA&#34;)
        &#34;&#34;&#34;
        commit = self.start_commit(parent=parent, description=description, branch=branch)
        try:
            yield OpenCommit(commit=commit, stub=self)
        finally:
            commit._open = False
            self.finish_commit(commit=commit)

    def wait_commit(self, commit: &#34;Commit&#34;) -&gt; &#34;CommitInfo&#34;:
        &#34;&#34;&#34;Waits until the commit is finished being created.&#34;&#34;&#34;
        return self.inspect_commit(commit=commit, wait=CommitState.FINISHED)

    def wait_commit_set(self, commit_set: &#34;CommitSet&#34;) -&gt; List[&#34;CommitInfo&#34;]:
        &#34;&#34;&#34;Similar to client.pfs.wait_commit but streams back the pfs.CommitInfo
        from all the downstream jobs that were initiated by this commit.
        &#34;&#34;&#34;
        return list(self.inspect_commit_set(commit_set=commit_set, wait=True))

    def put_files(
        self, *, commit: &#34;Commit&#34;, source: Union[Path, str], path: str
    ) -&gt; None:
        &#34;&#34;&#34;Recursively insert the contents of source into the open commit under path,
        matching the directory structure of source.

        This is roughly equivalent to ``pachctl put file -r``

        Parameters
        ----------
        commit : pfs.Commit
            The open commit to add files to.
        source : Union[Path, str]
            The directory to recursively insert content from.
        path : str
            The destination path in PFS.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     client.pfs.put_files(commit=c, source=&#34;path/to/local/files&#34;, path=&#34;/&#34;)
        &#34;&#34;&#34;
        source = Path(source)
        if not source.exists():
            raise FileNotFoundError(f&#34;source does not exist: {source}&#34;)
        if not source.is_dir():
            raise NotADirectoryError(f&#34;source is not a directory: {source}&#34;)
        for root, _, filenames in os.walk(source):
            for filename in filenames:
                src = os.path.join(root, filename)
                dst = os.path.join(path, os.path.relpath(src, start=source))
                with open(src, &#34;rb&#34;) as file:
                    self.put_file_from_file(commit=commit, path=dst, file=file)

    def put_file_from_bytes(
        self,
        *,
        commit: &#34;Commit&#34;,
        path: str,
        data: bytes,
        append: bool = False
    ) -&gt; Empty:
        &#34;&#34;&#34;Uploads a PFS file from a bytestring.

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path in the repo the data will be written to.
        data : bytes
            The file contents as bytes.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     client.pfs.put_file_from_bytes(
        &gt;&gt;&gt;         commit=c, path=&#34;/file.txt&#34;, data=b&#34;SOME BYTES&#34;
        &gt;&gt;&gt;     )
        &#34;&#34;&#34;
        return self.put_file_from_file(
            commit=commit, path=path, file=io.BytesIO(data), append=append
        )

    def put_file_from_url(
        self,
        *,
        commit: &#34;Commit&#34;,
        path: str,
        url: str,
        recursive: bool = False,
    ) -&gt; Empty:
        &#34;&#34;&#34;Uploads a PFS file from an url.

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path in the repo the data will be written to.
        url : str
            The URL of the file to put.
        recursive : bool
            If true, allows for recursive scraping on some types URLs, for
            example on s3:// URLs

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     client.pfs.put_file_from_url(
        &gt;&gt;&gt;         commit=c, path=&#34;/index.html&#34;, url=&#34;www.pachyderm.com/index.html&#34;
        &gt;&gt;&gt;     )
        &#34;&#34;&#34;
        operations = [
            ModifyFileRequest(set_commit=commit),
            ModifyFileRequest(delete_file=DeleteFile(path=path)),
            ModifyFileRequest(
                add_file=AddFile(
                    path=path,
                    url=AddFileUrlSource(url=url, recursive=recursive)
                )
            )
        ]
        return self.modify_file(iter(operations))

    def put_file_from_file(
        self,
        *,
        commit: &#34;Commit&#34;,
        path: str,
        file: &#34;SupportsRead[bytes]&#34;,
        append: bool = False
    ) -&gt; Empty:
        &#34;&#34;&#34;Uploads a PFS file from an open file object.

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path in the repo the data will be written to.
        file : SupportsRead[bytes]
            An open file object to read the data from.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     with open(&#34;local_file.dat&#34;, &#34;rb&#34;) as source:
        &gt;&gt;&gt;         client.pfs.put_file_from_file(
        &gt;&gt;&gt;             commit=c, path=&#34;/index.html&#34;, file=source
        &gt;&gt;&gt;         )
        &#34;&#34;&#34;
        # TODO: Can we verify that the file is outputting bytes?
        def operations() -&gt; Iterable[ModifyFileRequest]:
            yield ModifyFileRequest(set_commit=commit)
            if not append:
                yield ModifyFileRequest(delete_file=DeleteFile(path=path))
            yield ModifyFileRequest(add_file=AddFile(path=path, raw=b&#34;&#34;))
            while True:
                data = file.read(BUFFER_SIZE)
                if len(data) == 0:
                    return
                yield ModifyFileRequest(add_file=AddFile(path=path, raw=data))
        return self.modify_file(operations())

    def copy_file(
        self,
        *,
        commit: &#34;Commit&#34;,
        src: &#34;File&#34;,
        dst: str,
        append: bool = True
    ) -&gt; Empty:
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        src : pfs.File
            This file to be copied.
        dst : str
            The destination of the file, as a string path.
        append : bool
            If true, appends the contents of src to dst if it exists.
            Otherwise, overwrites the file.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/file.dat&#34;)
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     commit.pfs.copy_file(commit=c, src=source, dst=&#34;/copy.dat&#34;)
        &#34;&#34;&#34;
        operations = [
            ModifyFileRequest(set_commit=commit),
            ModifyFileRequest(
                copy_file=CopyFile(dst=dst, src=src, append=append)
            )
        ]
        return self.modify_file(iter(operations))

    def delete_file(self, *, commit: &#34;Commit&#34;, path: str) -&gt; Empty:
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path of the file to be deleted.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     commit.pfs.delete_file(commit=c, path=&#34;/file.dat&#34;)
        &#34;&#34;&#34;
        operations = [
            ModifyFileRequest(set_commit=commit),
            ModifyFileRequest(delete_file=DeleteFile(path=path)),
        ]
        return self.modify_file(iter(operations))

    def project_exists(self, project: &#34;Project&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a project exists.

        Parameters
        ----------
        project: pfs.Project
            The project to check.

        Returns
        -------
        bool
            Whether the project exists.
        &#34;&#34;&#34;
        try:
            self.inspect_project(project=project)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def repo_exists(self, repo: &#34;Repo&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a repo exists.

        Parameters
        ----------
        repo: pfs.Repo
            The repo to check.

        Returns
        -------
        bool
            Whether the repo exists.
        &#34;&#34;&#34;
        try:
            self.inspect_repo(repo=repo)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def branch_exists(self, branch: &#34;Branch&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a branch exists.

        Parameters
        ----------
        branch: pfs.Branch
            The branch to check.

        Returns
        -------
        bool
            Whether the branch exists.
        &#34;&#34;&#34;
        try:
            self.inspect_branch(branch=branch)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def commit_exists(self, commit: &#34;Commit&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a commit exists.

        Parameters
        ----------
        commit: pfs.Commit
            The commit to check.

        Returns
        -------
        bool
            Whether the commit exists.
        &#34;&#34;&#34;
        try:
            self.inspect_commit(commit=commit)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def path_exists(self, file: &#34;File&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether the path exists in the specified commit, agnostic to
        whether `path` is a file or a directory.

        Parameters
        ----------
        file : pfs.File
            The file (or directory) to check.

        Raises
        ------
        ValueError: If commit does not exist.

        Returns
        -------
        bool
            True if the path exists.
        &#34;&#34;&#34;
        try:
            self.inspect_commit(commit=file.commit)
        except grpc.RpcError as e:
            raise ValueError(&#34;commit does not exist&#34;) from e

        try:
            self.inspect_file(file=file)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def pfs_file(self, file: &#34;File&#34;) -&gt; &#34;PFSFile&#34;:  # TODO: Naming?
        &#34;&#34;&#34;Wraps the response stream of a client.pfs.get_file() call with a
        PFSFile object. This wrapper class allows you to interact with the
        file stream as a normal file object.

        Parameters
        ----------
        file : pfs.File
            The file to retrieve.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/example.csv&#34;)
        &gt;&gt;&gt; with client.pfs.pfs_file(file=source) as pfs_file:
        &gt;&gt;&gt;     for line in pfs_file:
        &gt;&gt;&gt;         print(line)
        &#34;&#34;&#34;
        stream = self.get_file(file=file)
        return PFSFile(stream)

    def pfs_tar_file(self, file: &#34;File&#34;) -&gt; &#34;PFSTarFile&#34;:  # TODO: Naming?
        &#34;&#34;&#34;Wraps the response stream of a client.pfs.get_tar_file() call with a
        PFSTarFile object. This wrapper class allows you to interact with the
        file stream as a standard tarfile.TarFile object.

        Parameters
        ----------
        file : pfs.File
            The file (or directory) to retrieve.
        &#34;&#34;&#34;
        stream = self.get_file_tar(file=file)
        return PFSTarFile.open(fileobj=PFSFile(stream), mode=&#34;r|*&#34;)</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit"><code class="flex name class">
<span>class <span class="ident">OpenCommit</span></span>
<span>(</span><span>commit: Commit, stub: <a title="pachyderm_sdk.api.pfs.extension.ApiStub" href="#pachyderm_sdk.api.pfs.extension.ApiStub">ApiStub</a>)</span>
</code></dt>
<dd>
<div class="desc"><p>An OpenCommit is an extension of the pfs.Commit message with some
helpful methods that provide a more intuitive UX when writing to a commit.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;data@master&quot;)) as commit:
&gt;&gt;&gt;     commit.put_file_from_bytes(&quot;/greeting.txt&quot;, b&quot;Hello!&quot;)
&gt;&gt;&gt;     commit.delete_file(&quot;/rude/insult.txt&quot;)
&gt;&gt;&gt; commit.wait()
</code></pre>
<p>Internal Use: Do not create this object yourself.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>The "open" commit to write to.</dd>
<dt><strong><code>stub</code></strong> :&ensp;<code>pfs.ApiStub</code></dt>
<dd>The API class to route requests though.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class OpenCommit(Commit):
    &#34;&#34;&#34;An OpenCommit is an extension of the pfs.Commit message with some
    helpful methods that provide a more intuitive UX when writing to a commit.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;data@master&#34;)) as commit:
    &gt;&gt;&gt;     commit.put_file_from_bytes(&#34;/greeting.txt&#34;, b&#34;Hello!&#34;)
    &gt;&gt;&gt;     commit.delete_file(&#34;/rude/insult.txt&#34;)
    &gt;&gt;&gt; commit.wait()
    &#34;&#34;&#34;

    def __init__(self, commit: &#34;Commit&#34;, stub: &#34;ApiStub&#34;):
        &#34;&#34;&#34;Internal Use: Do not create this object yourself.

        Parameters
        ----------
        commit : pfs.Commit
            The &#34;open&#34; commit to write to.
        stub : pfs.ApiStub
            The API class to route requests though.
        &#34;&#34;&#34;
        self._commit = commit
        self._stub = stub
        self._open = True

        # This is required to maintain serialization capabilities while being
        #   future compatible with any new fields to the pfs.Commit message.
        super().__init__(**{
            field.name: getattr(commit, field.name)
            for field in fields(commit)
        })

    def wait(self) -&gt; &#34;CommitInfo&#34;:
        &#34;&#34;&#34;Waits until the commit is finished being created.

        This method is intended to be called on a closed commit, but provided
        with this class to be used following the commit context.
        (See example in class docstring)
        &#34;&#34;&#34;
        return self._stub.wait_commit(self)

    def wait_set(self) -&gt; List[&#34;CommitInfo&#34;]:  # TODO: Better name?
        &#34;&#34;&#34;Similar to Commit.wait but streams back the pfs.CommitInfo
        from all the downstream jobs that were initiated by this commit.

        This method is intended to be called on a closed commit, but provided
        with this class to be used following the commit context.
        (See example in class docstring)
        &#34;&#34;&#34;
        return self._stub.wait_commit_set(CommitSet(id=self._commit.id))

    def put_file_from_bytes(
        self,
        path: str,
        data: bytes,
        append: bool = False
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Uploads a PFS file from a bytestring.

        Parameters
        ----------
        path : str
            The path in the repo the data will be written to.
        data : bytes
            The file contents as bytes.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.put_file_from_bytes(path=&#34;/file.txt&#34;, data=b&#34;SOME BYTES&#34;)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot write to a closed commit&#34;)
        self._stub.put_file_from_bytes(
            commit=self, path=path, data=data, append=append
        )
        return File(commit=self._commit, path=path)

    def put_file_from_url(
        self,
        *,
        path: str,
        url: str,
        recursive: bool = False,
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Uploads a PFS file from an url.

        Parameters
        ----------
        path : str
            The path in the repo the data will be written to.
        url : str
            The URL of the file to put.
        recursive : bool
            If true, allows for recursive scraping on some types URLs, for
            example on s3:// URLs

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.put_file_from_url(
        &gt;&gt;&gt;         path=&#34;/index.html&#34;, url=&#34;https://www.pachyderm.com/index.html&#34;
        &gt;&gt;&gt;     )
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot write to a closed commit&#34;)
        self._stub.put_file_from_url(
            commit=self, path=path, url=url, recursive=recursive
        )
        return File(commit=self._commit, path=path)

    def put_file_from_file(
        self,
        *,
        path: str,
        file: &#34;SupportsRead[bytes]&#34;,
        append: bool = False
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Uploads a PFS file from an open file object.

        Parameters
        ----------
        path : str
            The path in the repo the data will be written to.
        file : SupportsRead[bytes]
            An open file object to read the data from.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     with open(&#34;local_file.dat&#34;, &#34;rb&#34;) as source:
        &gt;&gt;&gt;         commit.put_file_from_file(path=&#34;/index.html&#34;, file=source)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot write to a closed commit&#34;)
        self._stub.put_file_from_file(
            commit=self, path=path, file=file, append=append
        )
        return File(commit=self._commit, path=path)

    def copy_file(
        self,
        *,
        src: &#34;File&#34;,
        dst: str,
        append: bool = True
    ) -&gt; &#34;File&#34;:
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        src : pfs.File
            This file to be copied.
        dst : str
            The destination of the file, as a string path.
        append : bool
            If true, appends the contents of src to dst if it exists.
            Otherwise, overwrites the file.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/file.dat&#34;)
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.copy_file(src=source, dst=&#34;/copy.dat&#34;)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot modify a closed commit&#34;)
        self._stub.copy_file(commit=self, src=src, dst=dst, append=append)
        return File(commit=self._commit, path=dst)

    def delete_file(self, *, path: str) -&gt; &#34;File&#34;:  # TODO: Should we return anything?
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        path : str
            The path of the file to be deleted.

        Raises
        ------
        ValueError: If the commit is closed.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
        &gt;&gt;&gt;     commit.delete_file(path=&#34;/file.dat&#34;)
        &#34;&#34;&#34;
        if not self._open:
            raise ValueError(&#34;Cannot modify a closed commit&#34;)
        self._stub.delete_file(commit=self, path=path)
        return File(commit=self._commit, path=path)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pachyderm_sdk.api.pfs.Commit" href="index.html#pachyderm_sdk.api.pfs.Commit">Commit</a></li>
<li>betterproto.Message</li>
<li>abc.ABC</li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.wait"><code class="name flex">
<span>def <span class="ident">wait</span></span>(<span>self) ‑> <a title="pachyderm_sdk.api.pfs.CommitInfo" href="index.html#pachyderm_sdk.api.pfs.CommitInfo">CommitInfo</a></span>
</code></dt>
<dd>
<div class="desc"><p>Waits until the commit is finished being created.</p>
<p>This method is intended to be called on a closed commit, but provided
with this class to be used following the commit context.
(See example in class docstring)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def wait(self) -&gt; &#34;CommitInfo&#34;:
    &#34;&#34;&#34;Waits until the commit is finished being created.

    This method is intended to be called on a closed commit, but provided
    with this class to be used following the commit context.
    (See example in class docstring)
    &#34;&#34;&#34;
    return self._stub.wait_commit(self)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.wait_set"><code class="name flex">
<span>def <span class="ident">wait_set</span></span>(<span>self) ‑> List[<a title="pachyderm_sdk.api.pfs.CommitInfo" href="index.html#pachyderm_sdk.api.pfs.CommitInfo">CommitInfo</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Similar to Commit.wait but streams back the pfs.CommitInfo
from all the downstream jobs that were initiated by this commit.</p>
<p>This method is intended to be called on a closed commit, but provided
with this class to be used following the commit context.
(See example in class docstring)</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def wait_set(self) -&gt; List[&#34;CommitInfo&#34;]:  # TODO: Better name?
    &#34;&#34;&#34;Similar to Commit.wait but streams back the pfs.CommitInfo
    from all the downstream jobs that were initiated by this commit.

    This method is intended to be called on a closed commit, but provided
    with this class to be used following the commit context.
    (See example in class docstring)
    &#34;&#34;&#34;
    return self._stub.wait_commit_set(CommitSet(id=self._commit.id))</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_bytes"><code class="name flex">
<span>def <span class="ident">put_file_from_bytes</span></span>(<span>self, path: str, data: bytes, append: bool = False) ‑> <a title="pachyderm_sdk.api.pfs.File" href="index.html#pachyderm_sdk.api.pfs.File">File</a></span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a PFS file from a bytestring.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path in the repo the data will be written to.</dd>
<dt><strong><code>data</code></strong> :&ensp;<code>bytes</code></dt>
<dd>The file contents as bytes.</dd>
<dt><strong><code>append</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If true, appends the data to the file specified at <code>path</code>, if
they already exist. Otherwise, overwrites them.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>ValueError: If the commit is closed.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as commit:
&gt;&gt;&gt;     commit.put_file_from_bytes(path=&quot;/file.txt&quot;, data=b&quot;SOME BYTES&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_file_from_bytes(
    self,
    path: str,
    data: bytes,
    append: bool = False
) -&gt; &#34;File&#34;:
    &#34;&#34;&#34;Uploads a PFS file from a bytestring.

    Parameters
    ----------
    path : str
        The path in the repo the data will be written to.
    data : bytes
        The file contents as bytes.
    append : bool, optional
        If true, appends the data to the file specified at `path`, if
        they already exist. Otherwise, overwrites them.

    Raises
    ------
    ValueError: If the commit is closed.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
    &gt;&gt;&gt;     commit.put_file_from_bytes(path=&#34;/file.txt&#34;, data=b&#34;SOME BYTES&#34;)
    &#34;&#34;&#34;
    if not self._open:
        raise ValueError(&#34;Cannot write to a closed commit&#34;)
    self._stub.put_file_from_bytes(
        commit=self, path=path, data=data, append=append
    )
    return File(commit=self._commit, path=path)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_url"><code class="name flex">
<span>def <span class="ident">put_file_from_url</span></span>(<span>self, *, path: str, url: str, recursive: bool = False) ‑> <a title="pachyderm_sdk.api.pfs.File" href="index.html#pachyderm_sdk.api.pfs.File">File</a></span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a PFS file from an url.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path in the repo the data will be written to.</dd>
<dt><strong><code>url</code></strong> :&ensp;<code>str</code></dt>
<dd>The URL of the file to put.</dd>
<dt><strong><code>recursive</code></strong> :&ensp;<code>bool</code></dt>
<dd>If true, allows for recursive scraping on some types URLs, for
example on s3:// URLs</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>ValueError: If the commit is closed.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as commit:
&gt;&gt;&gt;     commit.put_file_from_url(
&gt;&gt;&gt;         path=&quot;/index.html&quot;, url=&quot;https://www.pachyderm.com/index.html&quot;
&gt;&gt;&gt;     )
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_file_from_url(
    self,
    *,
    path: str,
    url: str,
    recursive: bool = False,
) -&gt; &#34;File&#34;:
    &#34;&#34;&#34;Uploads a PFS file from an url.

    Parameters
    ----------
    path : str
        The path in the repo the data will be written to.
    url : str
        The URL of the file to put.
    recursive : bool
        If true, allows for recursive scraping on some types URLs, for
        example on s3:// URLs

    Raises
    ------
    ValueError: If the commit is closed.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
    &gt;&gt;&gt;     commit.put_file_from_url(
    &gt;&gt;&gt;         path=&#34;/index.html&#34;, url=&#34;https://www.pachyderm.com/index.html&#34;
    &gt;&gt;&gt;     )
    &#34;&#34;&#34;
    if not self._open:
        raise ValueError(&#34;Cannot write to a closed commit&#34;)
    self._stub.put_file_from_url(
        commit=self, path=path, url=url, recursive=recursive
    )
    return File(commit=self._commit, path=path)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_file"><code class="name flex">
<span>def <span class="ident">put_file_from_file</span></span>(<span>self, *, path: str, file: SupportsRead[bytes], append: bool = False) ‑> File</span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a PFS file from an open file object.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path in the repo the data will be written to.</dd>
<dt><strong><code>file</code></strong> :&ensp;<code>SupportsRead[bytes]</code></dt>
<dd>An open file object to read the data from.</dd>
<dt><strong><code>append</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If true, appends the data to the file specified at <code>path</code>, if
they already exist. Otherwise, overwrites them.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>ValueError: If the commit is closed.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as commit:
&gt;&gt;&gt;     with open(&quot;local_file.dat&quot;, &quot;rb&quot;) as source:
&gt;&gt;&gt;         commit.put_file_from_file(path=&quot;/index.html&quot;, file=source)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_file_from_file(
    self,
    *,
    path: str,
    file: &#34;SupportsRead[bytes]&#34;,
    append: bool = False
) -&gt; &#34;File&#34;:
    &#34;&#34;&#34;Uploads a PFS file from an open file object.

    Parameters
    ----------
    path : str
        The path in the repo the data will be written to.
    file : SupportsRead[bytes]
        An open file object to read the data from.
    append : bool, optional
        If true, appends the data to the file specified at `path`, if
        they already exist. Otherwise, overwrites them.

    Raises
    ------
    ValueError: If the commit is closed.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
    &gt;&gt;&gt;     with open(&#34;local_file.dat&#34;, &#34;rb&#34;) as source:
    &gt;&gt;&gt;         commit.put_file_from_file(path=&#34;/index.html&#34;, file=source)
    &#34;&#34;&#34;
    if not self._open:
        raise ValueError(&#34;Cannot write to a closed commit&#34;)
    self._stub.put_file_from_file(
        commit=self, path=path, file=file, append=append
    )
    return File(commit=self._commit, path=path)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.copy_file"><code class="name flex">
<span>def <span class="ident">copy_file</span></span>(<span>self, *, src: File, dst: str, append: bool = True) ‑> <a title="pachyderm_sdk.api.pfs.File" href="index.html#pachyderm_sdk.api.pfs.File">File</a></span>
</code></dt>
<dd>
<div class="desc"><p>Copies a file within PFS</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>src</code></strong> :&ensp;<code>pfs.File</code></dt>
<dd>This file to be copied.</dd>
<dt><strong><code>dst</code></strong> :&ensp;<code>str</code></dt>
<dd>The destination of the file, as a string path.</dd>
<dt><strong><code>append</code></strong> :&ensp;<code>bool</code></dt>
<dd>If true, appends the contents of src to dst if it exists.
Otherwise, overwrites the file.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>ValueError: If the commit is closed.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; source = pfs.File.from_uri(&quot;images@master:/file.dat&quot;)
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as commit:
&gt;&gt;&gt;     commit.copy_file(src=source, dst=&quot;/copy.dat&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def copy_file(
    self,
    *,
    src: &#34;File&#34;,
    dst: str,
    append: bool = True
) -&gt; &#34;File&#34;:
    &#34;&#34;&#34;Copies a file within PFS

    Parameters
    ----------
    src : pfs.File
        This file to be copied.
    dst : str
        The destination of the file, as a string path.
    append : bool
        If true, appends the contents of src to dst if it exists.
        Otherwise, overwrites the file.

    Raises
    ------
    ValueError: If the commit is closed.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/file.dat&#34;)
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
    &gt;&gt;&gt;     commit.copy_file(src=source, dst=&#34;/copy.dat&#34;)
    &#34;&#34;&#34;
    if not self._open:
        raise ValueError(&#34;Cannot modify a closed commit&#34;)
    self._stub.copy_file(commit=self, src=src, dst=dst, append=append)
    return File(commit=self._commit, path=dst)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.OpenCommit.delete_file"><code class="name flex">
<span>def <span class="ident">delete_file</span></span>(<span>self, *, path: str) ‑> <a title="pachyderm_sdk.api.pfs.File" href="index.html#pachyderm_sdk.api.pfs.File">File</a></span>
</code></dt>
<dd>
<div class="desc"><p>Copies a file within PFS</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path of the file to be deleted.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>ValueError: If the commit is closed.</p>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as commit:
&gt;&gt;&gt;     commit.delete_file(path=&quot;/file.dat&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_file(self, *, path: str) -&gt; &#34;File&#34;:  # TODO: Should we return anything?
    &#34;&#34;&#34;Copies a file within PFS

    Parameters
    ----------
    path : str
        The path of the file to be deleted.

    Raises
    ------
    ValueError: If the commit is closed.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as commit:
    &gt;&gt;&gt;     commit.delete_file(path=&#34;/file.dat&#34;)
    &#34;&#34;&#34;
    if not self._open:
        raise ValueError(&#34;Cannot modify a closed commit&#34;)
    self._stub.delete_file(commit=self, path=path)
    return File(commit=self._commit, path=path)</code></pre>
</details>
</dd>
</dl>
<h3>Inherited members</h3>
<ul class="hlist">
<li><code><b><a title="pachyderm_sdk.api.pfs.Commit" href="index.html#pachyderm_sdk.api.pfs.Commit">Commit</a></b></code>:
<ul class="hlist">
<li><code><a title="pachyderm_sdk.api.pfs.Commit.branch" href="index.html#pachyderm_sdk.api.pfs.Commit.branch">branch</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.Commit.from_uri" href="index.html#pachyderm_sdk.api.pfs.Commit.from_uri">from_uri</a></code></li>
</ul>
</li>
</ul>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub"><code class="flex name class">
<span>class <span class="ident">ApiStub</span></span>
<span>(</span><span>channel: grpc.Channel)</span>
</code></dt>
<dd>
<div class="desc"><p>An extension to the API stub generated from the PFS protobufs.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ApiStub(_GeneratedApiStub):
    &#34;&#34;&#34;An extension to the API stub generated from the PFS protobufs.&#34;&#34;&#34;

    @contextmanager
    def commit(
        self, *, parent: &#34;Commit&#34; = None, description: str = &#34;&#34;, branch: &#34;Branch&#34; = None
    ) -&gt; ContextManager[&#34;OpenCommit&#34;]:
        &#34;&#34;&#34;A context manager for running operations within a commit.

        Parameters
        ----------
        parent : pfs.Commit
            The parent commit of the new commit. parent may be empty in which case
            the commit that Branch points to will be used as the parent.
            If the branch does not exist, the commit will have no parent.
        description : str, optional
            A description of the commit.
        branch : pfs.Branch
            The branch where the commit is created.

        Yields
        -------
        pfs.Commit
            A protobuf object that represents a commit.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     c.delete_file(c, &#34;/dir/delete_me.txt&#34;)
        &gt;&gt;&gt;     c.put_file_from_bytes(c, &#34;/new_file.txt&#34;, b&#34;DATA&#34;)
        &#34;&#34;&#34;
        commit = self.start_commit(parent=parent, description=description, branch=branch)
        try:
            yield OpenCommit(commit=commit, stub=self)
        finally:
            commit._open = False
            self.finish_commit(commit=commit)

    def wait_commit(self, commit: &#34;Commit&#34;) -&gt; &#34;CommitInfo&#34;:
        &#34;&#34;&#34;Waits until the commit is finished being created.&#34;&#34;&#34;
        return self.inspect_commit(commit=commit, wait=CommitState.FINISHED)

    def wait_commit_set(self, commit_set: &#34;CommitSet&#34;) -&gt; List[&#34;CommitInfo&#34;]:
        &#34;&#34;&#34;Similar to client.pfs.wait_commit but streams back the pfs.CommitInfo
        from all the downstream jobs that were initiated by this commit.
        &#34;&#34;&#34;
        return list(self.inspect_commit_set(commit_set=commit_set, wait=True))

    def put_files(
        self, *, commit: &#34;Commit&#34;, source: Union[Path, str], path: str
    ) -&gt; None:
        &#34;&#34;&#34;Recursively insert the contents of source into the open commit under path,
        matching the directory structure of source.

        This is roughly equivalent to ``pachctl put file -r``

        Parameters
        ----------
        commit : pfs.Commit
            The open commit to add files to.
        source : Union[Path, str]
            The directory to recursively insert content from.
        path : str
            The destination path in PFS.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     client.pfs.put_files(commit=c, source=&#34;path/to/local/files&#34;, path=&#34;/&#34;)
        &#34;&#34;&#34;
        source = Path(source)
        if not source.exists():
            raise FileNotFoundError(f&#34;source does not exist: {source}&#34;)
        if not source.is_dir():
            raise NotADirectoryError(f&#34;source is not a directory: {source}&#34;)
        for root, _, filenames in os.walk(source):
            for filename in filenames:
                src = os.path.join(root, filename)
                dst = os.path.join(path, os.path.relpath(src, start=source))
                with open(src, &#34;rb&#34;) as file:
                    self.put_file_from_file(commit=commit, path=dst, file=file)

    def put_file_from_bytes(
        self,
        *,
        commit: &#34;Commit&#34;,
        path: str,
        data: bytes,
        append: bool = False
    ) -&gt; Empty:
        &#34;&#34;&#34;Uploads a PFS file from a bytestring.

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path in the repo the data will be written to.
        data : bytes
            The file contents as bytes.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     client.pfs.put_file_from_bytes(
        &gt;&gt;&gt;         commit=c, path=&#34;/file.txt&#34;, data=b&#34;SOME BYTES&#34;
        &gt;&gt;&gt;     )
        &#34;&#34;&#34;
        return self.put_file_from_file(
            commit=commit, path=path, file=io.BytesIO(data), append=append
        )

    def put_file_from_url(
        self,
        *,
        commit: &#34;Commit&#34;,
        path: str,
        url: str,
        recursive: bool = False,
    ) -&gt; Empty:
        &#34;&#34;&#34;Uploads a PFS file from an url.

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path in the repo the data will be written to.
        url : str
            The URL of the file to put.
        recursive : bool
            If true, allows for recursive scraping on some types URLs, for
            example on s3:// URLs

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     client.pfs.put_file_from_url(
        &gt;&gt;&gt;         commit=c, path=&#34;/index.html&#34;, url=&#34;www.pachyderm.com/index.html&#34;
        &gt;&gt;&gt;     )
        &#34;&#34;&#34;
        operations = [
            ModifyFileRequest(set_commit=commit),
            ModifyFileRequest(delete_file=DeleteFile(path=path)),
            ModifyFileRequest(
                add_file=AddFile(
                    path=path,
                    url=AddFileUrlSource(url=url, recursive=recursive)
                )
            )
        ]
        return self.modify_file(iter(operations))

    def put_file_from_file(
        self,
        *,
        commit: &#34;Commit&#34;,
        path: str,
        file: &#34;SupportsRead[bytes]&#34;,
        append: bool = False
    ) -&gt; Empty:
        &#34;&#34;&#34;Uploads a PFS file from an open file object.

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path in the repo the data will be written to.
        file : SupportsRead[bytes]
            An open file object to read the data from.
        append : bool, optional
            If true, appends the data to the file specified at `path`, if
            they already exist. Otherwise, overwrites them.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     with open(&#34;local_file.dat&#34;, &#34;rb&#34;) as source:
        &gt;&gt;&gt;         client.pfs.put_file_from_file(
        &gt;&gt;&gt;             commit=c, path=&#34;/index.html&#34;, file=source
        &gt;&gt;&gt;         )
        &#34;&#34;&#34;
        # TODO: Can we verify that the file is outputting bytes?
        def operations() -&gt; Iterable[ModifyFileRequest]:
            yield ModifyFileRequest(set_commit=commit)
            if not append:
                yield ModifyFileRequest(delete_file=DeleteFile(path=path))
            yield ModifyFileRequest(add_file=AddFile(path=path, raw=b&#34;&#34;))
            while True:
                data = file.read(BUFFER_SIZE)
                if len(data) == 0:
                    return
                yield ModifyFileRequest(add_file=AddFile(path=path, raw=data))
        return self.modify_file(operations())

    def copy_file(
        self,
        *,
        commit: &#34;Commit&#34;,
        src: &#34;File&#34;,
        dst: str,
        append: bool = True
    ) -&gt; Empty:
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        src : pfs.File
            This file to be copied.
        dst : str
            The destination of the file, as a string path.
        append : bool
            If true, appends the contents of src to dst if it exists.
            Otherwise, overwrites the file.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/file.dat&#34;)
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     commit.pfs.copy_file(commit=c, src=source, dst=&#34;/copy.dat&#34;)
        &#34;&#34;&#34;
        operations = [
            ModifyFileRequest(set_commit=commit),
            ModifyFileRequest(
                copy_file=CopyFile(dst=dst, src=src, append=append)
            )
        ]
        return self.modify_file(iter(operations))

    def delete_file(self, *, commit: &#34;Commit&#34;, path: str) -&gt; Empty:
        &#34;&#34;&#34;Copies a file within PFS

        Parameters
        ----------
        commit : pfs.Commit
            An open commit to modify.
        path : str
            The path of the file to be deleted.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
        &gt;&gt;&gt;     commit.pfs.delete_file(commit=c, path=&#34;/file.dat&#34;)
        &#34;&#34;&#34;
        operations = [
            ModifyFileRequest(set_commit=commit),
            ModifyFileRequest(delete_file=DeleteFile(path=path)),
        ]
        return self.modify_file(iter(operations))

    def project_exists(self, project: &#34;Project&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a project exists.

        Parameters
        ----------
        project: pfs.Project
            The project to check.

        Returns
        -------
        bool
            Whether the project exists.
        &#34;&#34;&#34;
        try:
            self.inspect_project(project=project)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def repo_exists(self, repo: &#34;Repo&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a repo exists.

        Parameters
        ----------
        repo: pfs.Repo
            The repo to check.

        Returns
        -------
        bool
            Whether the repo exists.
        &#34;&#34;&#34;
        try:
            self.inspect_repo(repo=repo)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def branch_exists(self, branch: &#34;Branch&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a branch exists.

        Parameters
        ----------
        branch: pfs.Branch
            The branch to check.

        Returns
        -------
        bool
            Whether the branch exists.
        &#34;&#34;&#34;
        try:
            self.inspect_branch(branch=branch)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def commit_exists(self, commit: &#34;Commit&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether a commit exists.

        Parameters
        ----------
        commit: pfs.Commit
            The commit to check.

        Returns
        -------
        bool
            Whether the commit exists.
        &#34;&#34;&#34;
        try:
            self.inspect_commit(commit=commit)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def path_exists(self, file: &#34;File&#34;) -&gt; bool:
        &#34;&#34;&#34;Checks whether the path exists in the specified commit, agnostic to
        whether `path` is a file or a directory.

        Parameters
        ----------
        file : pfs.File
            The file (or directory) to check.

        Raises
        ------
        ValueError: If commit does not exist.

        Returns
        -------
        bool
            True if the path exists.
        &#34;&#34;&#34;
        try:
            self.inspect_commit(commit=file.commit)
        except grpc.RpcError as e:
            raise ValueError(&#34;commit does not exist&#34;) from e

        try:
            self.inspect_file(file=file)
            return True
        except grpc.RpcError as err:
            err: grpc.Call
            if err.code() == grpc.StatusCode.NOT_FOUND:
                return False
            raise err

    def pfs_file(self, file: &#34;File&#34;) -&gt; &#34;PFSFile&#34;:  # TODO: Naming?
        &#34;&#34;&#34;Wraps the response stream of a client.pfs.get_file() call with a
        PFSFile object. This wrapper class allows you to interact with the
        file stream as a normal file object.

        Parameters
        ----------
        file : pfs.File
            The file to retrieve.

        Examples
        --------
        &gt;&gt;&gt; from pachyderm_sdk import Client
        &gt;&gt;&gt; from pachyderm_sdk.api import pfs
        &gt;&gt;&gt; client: Client
        &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/example.csv&#34;)
        &gt;&gt;&gt; with client.pfs.pfs_file(file=source) as pfs_file:
        &gt;&gt;&gt;     for line in pfs_file:
        &gt;&gt;&gt;         print(line)
        &#34;&#34;&#34;
        stream = self.get_file(file=file)
        return PFSFile(stream)

    def pfs_tar_file(self, file: &#34;File&#34;) -&gt; &#34;PFSTarFile&#34;:  # TODO: Naming?
        &#34;&#34;&#34;Wraps the response stream of a client.pfs.get_tar_file() call with a
        PFSTarFile object. This wrapper class allows you to interact with the
        file stream as a standard tarfile.TarFile object.

        Parameters
        ----------
        file : pfs.File
            The file (or directory) to retrieve.
        &#34;&#34;&#34;
        stream = self.get_file_tar(file=file)
        return PFSTarFile.open(fileobj=PFSFile(stream), mode=&#34;r|*&#34;)</code></pre>
</details>
<h3>Ancestors</h3>
<ul class="hlist">
<li><a title="pachyderm_sdk.api.pfs.ApiStub" href="index.html#pachyderm_sdk.api.pfs.ApiStub">ApiStub</a></li>
</ul>
<h3>Methods</h3>
<dl>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.commit"><code class="name flex">
<span>def <span class="ident">commit</span></span>(<span>self, *, parent: Commit = None, description: str = '', branch: Branch = None) ‑> ContextManager[<a title="pachyderm_sdk.api.pfs.extension.OpenCommit" href="#pachyderm_sdk.api.pfs.extension.OpenCommit">OpenCommit</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>A context manager for running operations within a commit.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>parent</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>The parent commit of the new commit. parent may be empty in which case
the commit that Branch points to will be used as the parent.
If the branch does not exist, the commit will have no parent.</dd>
<dt><strong><code>description</code></strong> :&ensp;<code>str</code>, optional</dt>
<dd>A description of the commit.</dd>
<dt><strong><code>branch</code></strong> :&ensp;<code>pfs.Branch</code></dt>
<dd>The branch where the commit is created.</dd>
</dl>
<h2 id="yields">Yields</h2>
<dl>
<dt><code>pfs.Commit</code></dt>
<dd>A protobuf object that represents a commit.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     c.delete_file(c, &quot;/dir/delete_me.txt&quot;)
&gt;&gt;&gt;     c.put_file_from_bytes(c, &quot;/new_file.txt&quot;, b&quot;DATA&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@contextmanager
def commit(
    self, *, parent: &#34;Commit&#34; = None, description: str = &#34;&#34;, branch: &#34;Branch&#34; = None
) -&gt; ContextManager[&#34;OpenCommit&#34;]:
    &#34;&#34;&#34;A context manager for running operations within a commit.

    Parameters
    ----------
    parent : pfs.Commit
        The parent commit of the new commit. parent may be empty in which case
        the commit that Branch points to will be used as the parent.
        If the branch does not exist, the commit will have no parent.
    description : str, optional
        A description of the commit.
    branch : pfs.Branch
        The branch where the commit is created.

    Yields
    -------
    pfs.Commit
        A protobuf object that represents a commit.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     c.delete_file(c, &#34;/dir/delete_me.txt&#34;)
    &gt;&gt;&gt;     c.put_file_from_bytes(c, &#34;/new_file.txt&#34;, b&#34;DATA&#34;)
    &#34;&#34;&#34;
    commit = self.start_commit(parent=parent, description=description, branch=branch)
    try:
        yield OpenCommit(commit=commit, stub=self)
    finally:
        commit._open = False
        self.finish_commit(commit=commit)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.wait_commit"><code class="name flex">
<span>def <span class="ident">wait_commit</span></span>(<span>self, commit: Commit) ‑> <a title="pachyderm_sdk.api.pfs.CommitInfo" href="index.html#pachyderm_sdk.api.pfs.CommitInfo">CommitInfo</a></span>
</code></dt>
<dd>
<div class="desc"><p>Waits until the commit is finished being created.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def wait_commit(self, commit: &#34;Commit&#34;) -&gt; &#34;CommitInfo&#34;:
    &#34;&#34;&#34;Waits until the commit is finished being created.&#34;&#34;&#34;
    return self.inspect_commit(commit=commit, wait=CommitState.FINISHED)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.wait_commit_set"><code class="name flex">
<span>def <span class="ident">wait_commit_set</span></span>(<span>self, commit_set: CommitSet) ‑> List[<a title="pachyderm_sdk.api.pfs.CommitInfo" href="index.html#pachyderm_sdk.api.pfs.CommitInfo">CommitInfo</a>]</span>
</code></dt>
<dd>
<div class="desc"><p>Similar to client.pfs.wait_commit but streams back the pfs.CommitInfo
from all the downstream jobs that were initiated by this commit.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def wait_commit_set(self, commit_set: &#34;CommitSet&#34;) -&gt; List[&#34;CommitInfo&#34;]:
    &#34;&#34;&#34;Similar to client.pfs.wait_commit but streams back the pfs.CommitInfo
    from all the downstream jobs that were initiated by this commit.
    &#34;&#34;&#34;
    return list(self.inspect_commit_set(commit_set=commit_set, wait=True))</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.put_files"><code class="name flex">
<span>def <span class="ident">put_files</span></span>(<span>self, *, commit: Commit, source: Union[pathlib.Path, str], path: str) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Recursively insert the contents of source into the open commit under path,
matching the directory structure of source.</p>
<p>This is roughly equivalent to <code>pachctl put file -r</code></p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>The open commit to add files to.</dd>
<dt><strong><code>source</code></strong> :&ensp;<code>Union[Path, str]</code></dt>
<dd>The directory to recursively insert content from.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The destination path in PFS.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     client.pfs.put_files(commit=c, source=&quot;path/to/local/files&quot;, path=&quot;/&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_files(
    self, *, commit: &#34;Commit&#34;, source: Union[Path, str], path: str
) -&gt; None:
    &#34;&#34;&#34;Recursively insert the contents of source into the open commit under path,
    matching the directory structure of source.

    This is roughly equivalent to ``pachctl put file -r``

    Parameters
    ----------
    commit : pfs.Commit
        The open commit to add files to.
    source : Union[Path, str]
        The directory to recursively insert content from.
    path : str
        The destination path in PFS.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     client.pfs.put_files(commit=c, source=&#34;path/to/local/files&#34;, path=&#34;/&#34;)
    &#34;&#34;&#34;
    source = Path(source)
    if not source.exists():
        raise FileNotFoundError(f&#34;source does not exist: {source}&#34;)
    if not source.is_dir():
        raise NotADirectoryError(f&#34;source is not a directory: {source}&#34;)
    for root, _, filenames in os.walk(source):
        for filename in filenames:
            src = os.path.join(root, filename)
            dst = os.path.join(path, os.path.relpath(src, start=source))
            with open(src, &#34;rb&#34;) as file:
                self.put_file_from_file(commit=commit, path=dst, file=file)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_bytes"><code class="name flex">
<span>def <span class="ident">put_file_from_bytes</span></span>(<span>self, *, commit: Commit, path: str, data: bytes, append: bool = False) ‑> betterproto.lib.google.protobuf.Empty</span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a PFS file from a bytestring.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>An open commit to modify.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path in the repo the data will be written to.</dd>
<dt><strong><code>data</code></strong> :&ensp;<code>bytes</code></dt>
<dd>The file contents as bytes.</dd>
<dt><strong><code>append</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If true, appends the data to the file specified at <code>path</code>, if
they already exist. Otherwise, overwrites them.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     client.pfs.put_file_from_bytes(
&gt;&gt;&gt;         commit=c, path=&quot;/file.txt&quot;, data=b&quot;SOME BYTES&quot;
&gt;&gt;&gt;     )
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_file_from_bytes(
    self,
    *,
    commit: &#34;Commit&#34;,
    path: str,
    data: bytes,
    append: bool = False
) -&gt; Empty:
    &#34;&#34;&#34;Uploads a PFS file from a bytestring.

    Parameters
    ----------
    commit : pfs.Commit
        An open commit to modify.
    path : str
        The path in the repo the data will be written to.
    data : bytes
        The file contents as bytes.
    append : bool, optional
        If true, appends the data to the file specified at `path`, if
        they already exist. Otherwise, overwrites them.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     client.pfs.put_file_from_bytes(
    &gt;&gt;&gt;         commit=c, path=&#34;/file.txt&#34;, data=b&#34;SOME BYTES&#34;
    &gt;&gt;&gt;     )
    &#34;&#34;&#34;
    return self.put_file_from_file(
        commit=commit, path=path, file=io.BytesIO(data), append=append
    )</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_url"><code class="name flex">
<span>def <span class="ident">put_file_from_url</span></span>(<span>self, *, commit: Commit, path: str, url: str, recursive: bool = False) ‑> betterproto.lib.google.protobuf.Empty</span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a PFS file from an url.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>An open commit to modify.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path in the repo the data will be written to.</dd>
<dt><strong><code>url</code></strong> :&ensp;<code>str</code></dt>
<dd>The URL of the file to put.</dd>
<dt><strong><code>recursive</code></strong> :&ensp;<code>bool</code></dt>
<dd>If true, allows for recursive scraping on some types URLs, for
example on s3:// URLs</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     client.pfs.put_file_from_url(
&gt;&gt;&gt;         commit=c, path=&quot;/index.html&quot;, url=&quot;www.pachyderm.com/index.html&quot;
&gt;&gt;&gt;     )
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_file_from_url(
    self,
    *,
    commit: &#34;Commit&#34;,
    path: str,
    url: str,
    recursive: bool = False,
) -&gt; Empty:
    &#34;&#34;&#34;Uploads a PFS file from an url.

    Parameters
    ----------
    commit : pfs.Commit
        An open commit to modify.
    path : str
        The path in the repo the data will be written to.
    url : str
        The URL of the file to put.
    recursive : bool
        If true, allows for recursive scraping on some types URLs, for
        example on s3:// URLs

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     client.pfs.put_file_from_url(
    &gt;&gt;&gt;         commit=c, path=&#34;/index.html&#34;, url=&#34;www.pachyderm.com/index.html&#34;
    &gt;&gt;&gt;     )
    &#34;&#34;&#34;
    operations = [
        ModifyFileRequest(set_commit=commit),
        ModifyFileRequest(delete_file=DeleteFile(path=path)),
        ModifyFileRequest(
            add_file=AddFile(
                path=path,
                url=AddFileUrlSource(url=url, recursive=recursive)
            )
        )
    ]
    return self.modify_file(iter(operations))</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_file"><code class="name flex">
<span>def <span class="ident">put_file_from_file</span></span>(<span>self, *, commit: Commit, path: str, file: SupportsRead[bytes], append: bool = False) ‑> betterproto.lib.google.protobuf.Empty</span>
</code></dt>
<dd>
<div class="desc"><p>Uploads a PFS file from an open file object.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>An open commit to modify.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path in the repo the data will be written to.</dd>
<dt><strong><code>file</code></strong> :&ensp;<code>SupportsRead[bytes]</code></dt>
<dd>An open file object to read the data from.</dd>
<dt><strong><code>append</code></strong> :&ensp;<code>bool</code>, optional</dt>
<dd>If true, appends the data to the file specified at <code>path</code>, if
they already exist. Otherwise, overwrites them.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     with open(&quot;local_file.dat&quot;, &quot;rb&quot;) as source:
&gt;&gt;&gt;         client.pfs.put_file_from_file(
&gt;&gt;&gt;             commit=c, path=&quot;/index.html&quot;, file=source
&gt;&gt;&gt;         )
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def put_file_from_file(
    self,
    *,
    commit: &#34;Commit&#34;,
    path: str,
    file: &#34;SupportsRead[bytes]&#34;,
    append: bool = False
) -&gt; Empty:
    &#34;&#34;&#34;Uploads a PFS file from an open file object.

    Parameters
    ----------
    commit : pfs.Commit
        An open commit to modify.
    path : str
        The path in the repo the data will be written to.
    file : SupportsRead[bytes]
        An open file object to read the data from.
    append : bool, optional
        If true, appends the data to the file specified at `path`, if
        they already exist. Otherwise, overwrites them.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     with open(&#34;local_file.dat&#34;, &#34;rb&#34;) as source:
    &gt;&gt;&gt;         client.pfs.put_file_from_file(
    &gt;&gt;&gt;             commit=c, path=&#34;/index.html&#34;, file=source
    &gt;&gt;&gt;         )
    &#34;&#34;&#34;
    # TODO: Can we verify that the file is outputting bytes?
    def operations() -&gt; Iterable[ModifyFileRequest]:
        yield ModifyFileRequest(set_commit=commit)
        if not append:
            yield ModifyFileRequest(delete_file=DeleteFile(path=path))
        yield ModifyFileRequest(add_file=AddFile(path=path, raw=b&#34;&#34;))
        while True:
            data = file.read(BUFFER_SIZE)
            if len(data) == 0:
                return
            yield ModifyFileRequest(add_file=AddFile(path=path, raw=data))
    return self.modify_file(operations())</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.copy_file"><code class="name flex">
<span>def <span class="ident">copy_file</span></span>(<span>self, *, commit: Commit, src: File, dst: str, append: bool = True) ‑> betterproto.lib.google.protobuf.Empty</span>
</code></dt>
<dd>
<div class="desc"><p>Copies a file within PFS</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>An open commit to modify.</dd>
<dt><strong><code>src</code></strong> :&ensp;<code>pfs.File</code></dt>
<dd>This file to be copied.</dd>
<dt><strong><code>dst</code></strong> :&ensp;<code>str</code></dt>
<dd>The destination of the file, as a string path.</dd>
<dt><strong><code>append</code></strong> :&ensp;<code>bool</code></dt>
<dd>If true, appends the contents of src to dst if it exists.
Otherwise, overwrites the file.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; source = pfs.File.from_uri(&quot;images@master:/file.dat&quot;)
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     commit.pfs.copy_file(commit=c, src=source, dst=&quot;/copy.dat&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def copy_file(
    self,
    *,
    commit: &#34;Commit&#34;,
    src: &#34;File&#34;,
    dst: str,
    append: bool = True
) -&gt; Empty:
    &#34;&#34;&#34;Copies a file within PFS

    Parameters
    ----------
    commit : pfs.Commit
        An open commit to modify.
    src : pfs.File
        This file to be copied.
    dst : str
        The destination of the file, as a string path.
    append : bool
        If true, appends the contents of src to dst if it exists.
        Otherwise, overwrites the file.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/file.dat&#34;)
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     commit.pfs.copy_file(commit=c, src=source, dst=&#34;/copy.dat&#34;)
    &#34;&#34;&#34;
    operations = [
        ModifyFileRequest(set_commit=commit),
        ModifyFileRequest(
            copy_file=CopyFile(dst=dst, src=src, append=append)
        )
    ]
    return self.modify_file(iter(operations))</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.delete_file"><code class="name flex">
<span>def <span class="ident">delete_file</span></span>(<span>self, *, commit: Commit, path: str) ‑> betterproto.lib.google.protobuf.Empty</span>
</code></dt>
<dd>
<div class="desc"><p>Copies a file within PFS</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>An open commit to modify.</dd>
<dt><strong><code>path</code></strong> :&ensp;<code>str</code></dt>
<dd>The path of the file to be deleted.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&quot;images@master&quot;)) as c:
&gt;&gt;&gt;     commit.pfs.delete_file(commit=c, path=&quot;/file.dat&quot;)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def delete_file(self, *, commit: &#34;Commit&#34;, path: str) -&gt; Empty:
    &#34;&#34;&#34;Copies a file within PFS

    Parameters
    ----------
    commit : pfs.Commit
        An open commit to modify.
    path : str
        The path of the file to be deleted.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; with client.pfs.commit(branch=pfs.Branch.from_uri(&#34;images@master&#34;)) as c:
    &gt;&gt;&gt;     commit.pfs.delete_file(commit=c, path=&#34;/file.dat&#34;)
    &#34;&#34;&#34;
    operations = [
        ModifyFileRequest(set_commit=commit),
        ModifyFileRequest(delete_file=DeleteFile(path=path)),
    ]
    return self.modify_file(iter(operations))</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.project_exists"><code class="name flex">
<span>def <span class="ident">project_exists</span></span>(<span>self, project: Project) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks whether a project exists.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>project</code></strong> :&ensp;<code>pfs.Project</code></dt>
<dd>The project to check.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Whether the project exists.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def project_exists(self, project: &#34;Project&#34;) -&gt; bool:
    &#34;&#34;&#34;Checks whether a project exists.

    Parameters
    ----------
    project: pfs.Project
        The project to check.

    Returns
    -------
    bool
        Whether the project exists.
    &#34;&#34;&#34;
    try:
        self.inspect_project(project=project)
        return True
    except grpc.RpcError as err:
        err: grpc.Call
        if err.code() == grpc.StatusCode.NOT_FOUND:
            return False
        raise err</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.repo_exists"><code class="name flex">
<span>def <span class="ident">repo_exists</span></span>(<span>self, repo: Repo) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks whether a repo exists.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>repo</code></strong> :&ensp;<code>pfs.Repo</code></dt>
<dd>The repo to check.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Whether the repo exists.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def repo_exists(self, repo: &#34;Repo&#34;) -&gt; bool:
    &#34;&#34;&#34;Checks whether a repo exists.

    Parameters
    ----------
    repo: pfs.Repo
        The repo to check.

    Returns
    -------
    bool
        Whether the repo exists.
    &#34;&#34;&#34;
    try:
        self.inspect_repo(repo=repo)
        return True
    except grpc.RpcError as err:
        err: grpc.Call
        if err.code() == grpc.StatusCode.NOT_FOUND:
            return False
        raise err</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.branch_exists"><code class="name flex">
<span>def <span class="ident">branch_exists</span></span>(<span>self, branch: Branch) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks whether a branch exists.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>branch</code></strong> :&ensp;<code>pfs.Branch</code></dt>
<dd>The branch to check.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Whether the branch exists.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def branch_exists(self, branch: &#34;Branch&#34;) -&gt; bool:
    &#34;&#34;&#34;Checks whether a branch exists.

    Parameters
    ----------
    branch: pfs.Branch
        The branch to check.

    Returns
    -------
    bool
        Whether the branch exists.
    &#34;&#34;&#34;
    try:
        self.inspect_branch(branch=branch)
        return True
    except grpc.RpcError as err:
        err: grpc.Call
        if err.code() == grpc.StatusCode.NOT_FOUND:
            return False
        raise err</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.commit_exists"><code class="name flex">
<span>def <span class="ident">commit_exists</span></span>(<span>self, commit: Commit) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks whether a commit exists.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>commit</code></strong> :&ensp;<code>pfs.Commit</code></dt>
<dd>The commit to check.</dd>
</dl>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>Whether the commit exists.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def commit_exists(self, commit: &#34;Commit&#34;) -&gt; bool:
    &#34;&#34;&#34;Checks whether a commit exists.

    Parameters
    ----------
    commit: pfs.Commit
        The commit to check.

    Returns
    -------
    bool
        Whether the commit exists.
    &#34;&#34;&#34;
    try:
        self.inspect_commit(commit=commit)
        return True
    except grpc.RpcError as err:
        err: grpc.Call
        if err.code() == grpc.StatusCode.NOT_FOUND:
            return False
        raise err</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.path_exists"><code class="name flex">
<span>def <span class="ident">path_exists</span></span>(<span>self, file: File) ‑> bool</span>
</code></dt>
<dd>
<div class="desc"><p>Checks whether the path exists in the specified commit, agnostic to
whether <code>path</code> is a file or a directory.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>file</code></strong> :&ensp;<code>pfs.File</code></dt>
<dd>The file (or directory) to check.</dd>
</dl>
<h2 id="raises">Raises</h2>
<p>ValueError: If commit does not exist.</p>
<h2 id="returns">Returns</h2>
<dl>
<dt><code>bool</code></dt>
<dd>True if the path exists.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def path_exists(self, file: &#34;File&#34;) -&gt; bool:
    &#34;&#34;&#34;Checks whether the path exists in the specified commit, agnostic to
    whether `path` is a file or a directory.

    Parameters
    ----------
    file : pfs.File
        The file (or directory) to check.

    Raises
    ------
    ValueError: If commit does not exist.

    Returns
    -------
    bool
        True if the path exists.
    &#34;&#34;&#34;
    try:
        self.inspect_commit(commit=file.commit)
    except grpc.RpcError as e:
        raise ValueError(&#34;commit does not exist&#34;) from e

    try:
        self.inspect_file(file=file)
        return True
    except grpc.RpcError as err:
        err: grpc.Call
        if err.code() == grpc.StatusCode.NOT_FOUND:
            return False
        raise err</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.pfs_file"><code class="name flex">
<span>def <span class="ident">pfs_file</span></span>(<span>self, file: File) ‑> <a title="pachyderm_sdk.api.pfs.file.PFSFile" href="file.html#pachyderm_sdk.api.pfs.file.PFSFile">PFSFile</a></span>
</code></dt>
<dd>
<div class="desc"><p>Wraps the response stream of a client.pfs.get_file() call with a
PFSFile object. This wrapper class allows you to interact with the
file stream as a normal file object.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>file</code></strong> :&ensp;<code>pfs.File</code></dt>
<dd>The file to retrieve.</dd>
</dl>
<h2 id="examples">Examples</h2>
<pre><code class="language-python-repl">&gt;&gt;&gt; from pachyderm_sdk import Client
&gt;&gt;&gt; from pachyderm_sdk.api import pfs
&gt;&gt;&gt; client: Client
&gt;&gt;&gt; source = pfs.File.from_uri(&quot;images@master:/example.csv&quot;)
&gt;&gt;&gt; with client.pfs.pfs_file(file=source) as pfs_file:
&gt;&gt;&gt;     for line in pfs_file:
&gt;&gt;&gt;         print(line)
</code></pre></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pfs_file(self, file: &#34;File&#34;) -&gt; &#34;PFSFile&#34;:  # TODO: Naming?
    &#34;&#34;&#34;Wraps the response stream of a client.pfs.get_file() call with a
    PFSFile object. This wrapper class allows you to interact with the
    file stream as a normal file object.

    Parameters
    ----------
    file : pfs.File
        The file to retrieve.

    Examples
    --------
    &gt;&gt;&gt; from pachyderm_sdk import Client
    &gt;&gt;&gt; from pachyderm_sdk.api import pfs
    &gt;&gt;&gt; client: Client
    &gt;&gt;&gt; source = pfs.File.from_uri(&#34;images@master:/example.csv&#34;)
    &gt;&gt;&gt; with client.pfs.pfs_file(file=source) as pfs_file:
    &gt;&gt;&gt;     for line in pfs_file:
    &gt;&gt;&gt;         print(line)
    &#34;&#34;&#34;
    stream = self.get_file(file=file)
    return PFSFile(stream)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.api.pfs.extension.ApiStub.pfs_tar_file"><code class="name flex">
<span>def <span class="ident">pfs_tar_file</span></span>(<span>self, file: File) ‑> <a title="pachyderm_sdk.api.pfs.file.PFSTarFile" href="file.html#pachyderm_sdk.api.pfs.file.PFSTarFile">PFSTarFile</a></span>
</code></dt>
<dd>
<div class="desc"><p>Wraps the response stream of a client.pfs.get_tar_file() call with a
PFSTarFile object. This wrapper class allows you to interact with the
file stream as a standard tarfile.TarFile object.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>file</code></strong> :&ensp;<code>pfs.File</code></dt>
<dd>The file (or directory) to retrieve.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def pfs_tar_file(self, file: &#34;File&#34;) -&gt; &#34;PFSTarFile&#34;:  # TODO: Naming?
    &#34;&#34;&#34;Wraps the response stream of a client.pfs.get_tar_file() call with a
    PFSTarFile object. This wrapper class allows you to interact with the
    file stream as a standard tarfile.TarFile object.

    Parameters
    ----------
    file : pfs.File
        The file (or directory) to retrieve.
    &#34;&#34;&#34;
    stream = self.get_file_tar(file=file)
    return PFSTarFile.open(fileobj=PFSFile(stream), mode=&#34;r|*&#34;)</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<style> img { max-width: 50%; } </style>
<img src="https://raw.githubusercontent.com/pachyderm/pachyderm/master/Pachyderm_Icon-01.svg" alt="">
</header>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pachyderm_sdk.api.pfs" href="index.html">pachyderm_sdk.api.pfs</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit" href="#pachyderm_sdk.api.pfs.extension.OpenCommit">OpenCommit</a></code></h4>
<ul class="two-column">
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.wait" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.wait">wait</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.wait_set" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.wait_set">wait_set</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_bytes" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_bytes">put_file_from_bytes</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_url" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_url">put_file_from_url</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_file" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.put_file_from_file">put_file_from_file</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.copy_file" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.copy_file">copy_file</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.OpenCommit.delete_file" href="#pachyderm_sdk.api.pfs.extension.OpenCommit.delete_file">delete_file</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub" href="#pachyderm_sdk.api.pfs.extension.ApiStub">ApiStub</a></code></h4>
<ul class="two-column">
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.commit" href="#pachyderm_sdk.api.pfs.extension.ApiStub.commit">commit</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.wait_commit" href="#pachyderm_sdk.api.pfs.extension.ApiStub.wait_commit">wait_commit</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.wait_commit_set" href="#pachyderm_sdk.api.pfs.extension.ApiStub.wait_commit_set">wait_commit_set</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.put_files" href="#pachyderm_sdk.api.pfs.extension.ApiStub.put_files">put_files</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_bytes" href="#pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_bytes">put_file_from_bytes</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_url" href="#pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_url">put_file_from_url</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_file" href="#pachyderm_sdk.api.pfs.extension.ApiStub.put_file_from_file">put_file_from_file</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.copy_file" href="#pachyderm_sdk.api.pfs.extension.ApiStub.copy_file">copy_file</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.delete_file" href="#pachyderm_sdk.api.pfs.extension.ApiStub.delete_file">delete_file</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.project_exists" href="#pachyderm_sdk.api.pfs.extension.ApiStub.project_exists">project_exists</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.repo_exists" href="#pachyderm_sdk.api.pfs.extension.ApiStub.repo_exists">repo_exists</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.branch_exists" href="#pachyderm_sdk.api.pfs.extension.ApiStub.branch_exists">branch_exists</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.commit_exists" href="#pachyderm_sdk.api.pfs.extension.ApiStub.commit_exists">commit_exists</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.path_exists" href="#pachyderm_sdk.api.pfs.extension.ApiStub.path_exists">path_exists</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.pfs_file" href="#pachyderm_sdk.api.pfs.extension.ApiStub.pfs_file">pfs_file</a></code></li>
<li><code><a title="pachyderm_sdk.api.pfs.extension.ApiStub.pfs_tar_file" href="#pachyderm_sdk.api.pfs.extension.ApiStub.pfs_tar_file">pfs_tar_file</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>