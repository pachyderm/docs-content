<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />
<meta name="generator" content="pdoc 0.10.0" />
<title>pachyderm_sdk.config API documentation</title>
<meta name="description" content="Functionality for parsing Pachyderm config files." />
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/sanitize.min.css" integrity="sha256-PK9q560IAAa6WVRRh76LtCaI8pjTJ2z11v0miyNNjrs=" crossorigin>
<link rel="preload stylesheet" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/10up-sanitize.css/11.0.1/typography.min.css" integrity="sha256-7l/o7C8jubJiy74VsKTidCy1yBkRtiUGbVkYBylBqUg=" crossorigin>
<link rel="stylesheet preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/styles/github.min.css" crossorigin>
<style>:root{--highlight-color:#fe9}.flex{display:flex !important}body{line-height:1.5em}#content{padding:20px}#sidebar{padding:30px;overflow:hidden}#sidebar > *:last-child{margin-bottom:2cm}.http-server-breadcrumbs{font-size:130%;margin:0 0 15px 0}#footer{font-size:.75em;padding:5px 30px;border-top:1px solid #ddd;text-align:right}#footer p{margin:0 0 0 1em;display:inline-block}#footer p:last-child{margin-right:30px}h1,h2,h3,h4,h5{font-weight:300}h1{font-size:2.5em;line-height:1.1em}h2{font-size:1.75em;margin:1em 0 .50em 0}h3{font-size:1.4em;margin:25px 0 10px 0}h4{margin:0;font-size:105%}h1:target,h2:target,h3:target,h4:target,h5:target,h6:target{background:var(--highlight-color);padding:.2em 0}a{color:#058;text-decoration:none;transition:color .3s ease-in-out}a:hover{color:#e82}.title code{font-weight:bold}h2[id^="header-"]{margin-top:2em}.ident{color:#900}pre code{background:#f8f8f8;font-size:.8em;line-height:1.4em}code{background:#f2f2f1;padding:1px 4px;overflow-wrap:break-word}h1 code{background:transparent}pre{background:#f8f8f8;border:0;border-top:1px solid #ccc;border-bottom:1px solid #ccc;margin:1em 0;padding:1ex}#http-server-module-list{display:flex;flex-flow:column}#http-server-module-list div{display:flex}#http-server-module-list dt{min-width:10%}#http-server-module-list p{margin-top:0}.toc ul,#index{list-style-type:none;margin:0;padding:0}#index code{background:transparent}#index h3{border-bottom:1px solid #ddd}#index ul{padding:0}#index h4{margin-top:.6em;font-weight:bold}@media (min-width:200ex){#index .two-column{column-count:2}}@media (min-width:300ex){#index .two-column{column-count:3}}dl{margin-bottom:2em}dl dl:last-child{margin-bottom:4em}dd{margin:0 0 1em 3em}#header-classes + dl > dd{margin-bottom:3em}dd dd{margin-left:2em}dd p{margin:10px 0}.name{background:#eee;font-weight:bold;font-size:.85em;padding:5px 10px;display:inline-block;min-width:40%}.name:hover{background:#e0e0e0}dt:target .name{background:var(--highlight-color)}.name > span:first-child{white-space:nowrap}.name.class > span:nth-child(2){margin-left:.4em}.inherited{color:#999;border-left:5px solid #eee;padding-left:1em}.inheritance em{font-style:normal;font-weight:bold}.desc h2{font-weight:400;font-size:1.25em}.desc h3{font-size:1em}.desc dt code{background:inherit}.source summary,.git-link-div{color:#666;text-align:right;font-weight:400;font-size:.8em;text-transform:uppercase}.source summary > *{white-space:nowrap;cursor:pointer}.git-link{color:inherit;margin-left:1em}.source pre{max-height:500px;overflow:auto;margin:0}.source pre code{font-size:12px;overflow:visible}.hlist{list-style:none}.hlist li{display:inline}.hlist li:after{content:',\2002'}.hlist li:last-child:after{content:none}.hlist .hlist{display:inline;padding-left:1em}img{max-width:100%}td{padding:0 .5em}.admonition{padding:.1em .5em;margin-bottom:1em}.admonition-title{font-weight:bold}.admonition.note,.admonition.info,.admonition.important{background:#aef}.admonition.todo,.admonition.versionadded,.admonition.tip,.admonition.hint{background:#dfd}.admonition.warning,.admonition.versionchanged,.admonition.deprecated{background:#fd4}.admonition.error,.admonition.danger,.admonition.caution{background:lightpink}</style>
<style media="screen and (min-width: 700px)">@media screen and (min-width:700px){#sidebar{width:30%;height:100vh;overflow:auto;position:sticky;top:0}#content{width:70%;max-width:100ch;padding:3em 4em;border-left:1px solid #ddd}pre code{font-size:1em}.item .name{font-size:1em}main{display:flex;flex-direction:row-reverse;justify-content:flex-end}.toc ul ul,#index ul{padding-left:1.5em}.toc > ul > li{margin-top:.5em}}</style>
<style media="print">@media print{#sidebar h1{page-break-before:always}.source{display:none}}@media print{*{background:transparent !important;color:#000 !important;box-shadow:none !important;text-shadow:none !important}a[href]:after{content:" (" attr(href) ")";font-size:90%}a[href][title]:after{content:none}abbr[title]:after{content:" (" attr(title) ")"}.ir a:after,a[href^="javascript:"]:after,a[href^="#"]:after{content:""}pre,blockquote{border:1px solid #999;page-break-inside:avoid}thead{display:table-header-group}tr,img{page-break-inside:avoid}img{max-width:100% !important}@page{margin:0.5cm}p,h2,h3{orphans:3;widows:3}h1,h2,h3,h4,h5,h6{page-break-after:avoid}}</style>
<script defer src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.1.1/highlight.min.js" integrity="sha256-Uv3H6lx7dJmRfRvH8TH6kJD1TSK1aFcwgx+mdg3epi8=" crossorigin></script>
<script>window.addEventListener('DOMContentLoaded', () => hljs.initHighlighting())</script>
</head>
<body>
<main>
<article id="content">
<header>
<h1 class="title">Module <code>pachyderm_sdk.config</code></h1>
</header>
<section id="section-intro">
<p>Functionality for parsing Pachyderm config files.</p>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">&#34;&#34;&#34;Functionality for parsing Pachyderm config files.&#34;&#34;&#34;
import json
import os
import uuid
from base64 import b64decode
from dataclasses import dataclass, asdict
from pathlib import Path
from typing import Dict, Optional, Union

from .errors import ConfigError


class ConfigFile:
    &#34;&#34;&#34;A parsed Pachyderm config file.&#34;&#34;&#34;

    def __init__(self, data: dict):
        &#34;&#34;&#34;
        Parameters
        ----------
        data : dict (JSON)
            The config file data. The only required fields are:
            {
              &#34;v2&#34;: {
                &#34;active_context&#34;: ...,
                &#34;contexts&#34;: {...}
              }
            }
        &#34;&#34;&#34;
        if (v2 := data.get(&#34;v2&#34;)) is None or not (
            &#34;active_context&#34; in v2 and &#34;contexts&#34; in v2
        ):
            raise ValueError(
                &#34;Missing required fields v2.active_context and/or v2.contexts.&#34;
            )
        self._config_file_data = data

    @classmethod
    def from_path(cls, config_file: Union[Path, str]) -&gt; &#34;ConfigFile&#34;:
        &#34;&#34;&#34;Parse a Pachyderm config file from a local file.

        Parameters
        ----------
        config_file : str
            The path to the config file.
        &#34;&#34;&#34;
        config_file = Path(os.path.expanduser(config_file)).resolve()
        return cls(data=json.loads(config_file.read_bytes()))

    @classmethod
    def new_with_context(cls, name: str, context: &#34;Context&#34;) -&gt; &#34;ConfigFile&#34;:
        &#34;&#34;&#34;Create a new ConfigFile object from a single context.
        This will also set this specified context as the active context.

        Parameters
        ----------
        name : str
            The name of the context.
        context : Context
            The context object.
        &#34;&#34;&#34;
        data = dict(
            user_id=str(uuid.uuid4()).replace(&#34;-&#34;, &#34;&#34;),
            v2=dict(
                active_context=name,
                contexts={name: asdict(context)},
                metrics=True,
            ),
        )
        return cls(data)

    @property
    def user_id(self) -&gt; Optional[str]:
        &#34;&#34;&#34;The user ID of the config file.&#34;&#34;&#34;
        return self._config_file_data.get(&#34;user_id&#34;)

    @property
    def active_context(self) -&gt; &#34;Context&#34;:
        &#34;&#34;&#34;The currently-active context.&#34;&#34;&#34;
        active_context_name = self._config_file_data[&#34;v2&#34;][&#34;active_context&#34;]
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if active_context_name not in contexts:
            raise ConfigError(f&#34;active context not found: {active_context_name}&#34;)
        return Context(**contexts[active_context_name])

    @property
    def active_enterprise_context(self) -&gt; &#34;Context&#34;:
        &#34;&#34;&#34;The currently-active context that is enterprise-enabled.&#34;&#34;&#34;
        context_name = self._config_file_data[&#34;v2&#34;].get(&#34;active_enterprise_context&#34;)
        if context_name is None:
            raise ConfigError(&#34;active enterprise context is not specified&#34;)
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if context_name not in contexts:
            raise ConfigError(f&#34;active enterprise context not found: {context_name}&#34;)
        return Context(**contexts[context_name])

    def add_context(
        self, name: str, context: &#34;Context&#34;, *, overwrite: bool = False
    ) -&gt; None:
        &#34;&#34;&#34;Add a context to the parsed config.
        The context name must be unique, unless overwrite is True.

        Parameters
        ----------
        name : str
            The name of the context.
        context : Context
            The context object.
        overwrite : bool (kwarg)
            Whether to overwrite an existing context.
        &#34;&#34;&#34;
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if (name in contexts) and not overwrite:
            raise ValueError(f&#39;context &#34;{name}&#34; already exists&#39;)
        contexts[name] = asdict(context)

    def set_active_context(self, name: str) -&gt; None:
        &#34;&#34;&#34;Set the active context to the specified name.
        The context must exist, else a ValueError is raise.

        Parameters
        ----------
        name : str
            The name of the context.
        &#34;&#34;&#34;
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if name not in contexts:
            raise ValueError(f&#39;context &#34;{name}&#34; does not exist&#39;)
        self._config_file_data[&#34;v2&#34;][&#34;active_context&#34;] = name

    def write(self, config_file: Union[Path, str]) -&gt; None:
        &#34;&#34;&#34;Write the current config data to the specified file.

        Parameters
        ----------
        config_file : str
            The path to the config file.
        &#34;&#34;&#34;
        config_file = Path(os.path.expanduser(config_file)).resolve()
        with config_file.open(&#34;w&#34;) as file_out:
            file_out.write(json.dumps(self._config_file_data, indent=2))
            file_out.write(&#34;\n&#34;)


@dataclass
class Context:
    &#34;&#34;&#34;A context contains all the information needed to connect to a pachyderm
    instance. Not all fields need to be present for the context to be valid.&#34;&#34;&#34;

    source: Optional[int] = None
    &#34;&#34;&#34;An integer that specifies where the config came from. 
    This parameter is for internal use only and should not be modified.&#34;&#34;&#34;

    pachd_address: Optional[str] = None
    &#34;&#34;&#34;A host:port specification for connecting to pachd.&#34;&#34;&#34;

    server_cas: Optional[str] = None
    &#34;&#34;&#34;Trusted root certificates for the cluster, formatted as a 
    base64-encoded PEM. This is only set when TLS is enabled.&#34;&#34;&#34;

    session_token: Optional[str] = None
    &#34;&#34;&#34;A secret token identifying the current user within their pachyderm
    cluster. This is included in all RPCs and used to determine if a user&#39;s
    actions are authorized. This is only set when auth is enabled.&#34;&#34;&#34;

    active_transaction: Optional[str] = None
    &#34;&#34;&#34;The currently active transaction for batching together commands.&#34;&#34;&#34;

    cluster_name: Optional[str] = None
    &#34;&#34;&#34;The name of the underlying Kubernetes cluster.&#34;&#34;&#34;

    auth_info: Optional[str] = None
    &#34;&#34;&#34;The name of the underlying Kubernetes cluster’s auth credentials&#34;&#34;&#34;

    namespace: Optional[str] = None
    &#34;&#34;&#34;The underlying Kubernetes cluster’s namespace&#34;&#34;&#34;

    cluster_deployment_id: Optional[str] = None
    &#34;&#34;&#34;The pachyderm cluster deployment ID that is used to ensure the
    operations run on the expected cluster.&#34;&#34;&#34;

    project: Optional[str] = None

    enterprise_server: bool = False
    &#34;&#34;&#34;Whether the context represents an enterprise server.&#34;&#34;&#34;

    port_forwarders: Dict[str, int] = None
    &#34;&#34;&#34;A mapping of service name -&gt; local port.&#34;&#34;&#34;

    @property
    def active_pachd_address(self) -&gt; str:
        &#34;&#34;&#34;This pachd address factors in port-forwarding.&#34;&#34;&#34;
        if self.pachd_address is None:
            port = 30650
            if self.port_forwarders:
                port = self.port_forwarders.get(&#34;pachd&#34;, 30650)
            return f&#34;grpc://localhost:{port}&#34;
        return self.pachd_address

    @property
    def server_cas_decoded(self) -&gt; Optional[bytes]:
        &#34;&#34;&#34;The base64 decoded root certificates in PEM format, if they exist.&#34;&#34;&#34;
        if self.server_cas:
            return b64decode(bytes(self.server_cas, &#34;utf-8&#34;))</code></pre>
</details>
</section>
<section>
</section>
<section>
</section>
<section>
</section>
<section>
<h2 class="section-title" id="header-classes">Classes</h2>
<dl>
<dt id="pachyderm_sdk.config.ConfigFile"><code class="flex name class">
<span>class <span class="ident">ConfigFile</span></span>
<span>(</span><span>data: dict)</span>
</code></dt>
<dd>
<div class="desc"><p>A parsed Pachyderm config file.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>data</code></strong> :&ensp;<code>dict (JSON)</code></dt>
<dd>The config file data. The only required fields are:
{
"v2": {
"active_context": &hellip;,
"contexts": {&hellip;}
}
}</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">class ConfigFile:
    &#34;&#34;&#34;A parsed Pachyderm config file.&#34;&#34;&#34;

    def __init__(self, data: dict):
        &#34;&#34;&#34;
        Parameters
        ----------
        data : dict (JSON)
            The config file data. The only required fields are:
            {
              &#34;v2&#34;: {
                &#34;active_context&#34;: ...,
                &#34;contexts&#34;: {...}
              }
            }
        &#34;&#34;&#34;
        if (v2 := data.get(&#34;v2&#34;)) is None or not (
            &#34;active_context&#34; in v2 and &#34;contexts&#34; in v2
        ):
            raise ValueError(
                &#34;Missing required fields v2.active_context and/or v2.contexts.&#34;
            )
        self._config_file_data = data

    @classmethod
    def from_path(cls, config_file: Union[Path, str]) -&gt; &#34;ConfigFile&#34;:
        &#34;&#34;&#34;Parse a Pachyderm config file from a local file.

        Parameters
        ----------
        config_file : str
            The path to the config file.
        &#34;&#34;&#34;
        config_file = Path(os.path.expanduser(config_file)).resolve()
        return cls(data=json.loads(config_file.read_bytes()))

    @classmethod
    def new_with_context(cls, name: str, context: &#34;Context&#34;) -&gt; &#34;ConfigFile&#34;:
        &#34;&#34;&#34;Create a new ConfigFile object from a single context.
        This will also set this specified context as the active context.

        Parameters
        ----------
        name : str
            The name of the context.
        context : Context
            The context object.
        &#34;&#34;&#34;
        data = dict(
            user_id=str(uuid.uuid4()).replace(&#34;-&#34;, &#34;&#34;),
            v2=dict(
                active_context=name,
                contexts={name: asdict(context)},
                metrics=True,
            ),
        )
        return cls(data)

    @property
    def user_id(self) -&gt; Optional[str]:
        &#34;&#34;&#34;The user ID of the config file.&#34;&#34;&#34;
        return self._config_file_data.get(&#34;user_id&#34;)

    @property
    def active_context(self) -&gt; &#34;Context&#34;:
        &#34;&#34;&#34;The currently-active context.&#34;&#34;&#34;
        active_context_name = self._config_file_data[&#34;v2&#34;][&#34;active_context&#34;]
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if active_context_name not in contexts:
            raise ConfigError(f&#34;active context not found: {active_context_name}&#34;)
        return Context(**contexts[active_context_name])

    @property
    def active_enterprise_context(self) -&gt; &#34;Context&#34;:
        &#34;&#34;&#34;The currently-active context that is enterprise-enabled.&#34;&#34;&#34;
        context_name = self._config_file_data[&#34;v2&#34;].get(&#34;active_enterprise_context&#34;)
        if context_name is None:
            raise ConfigError(&#34;active enterprise context is not specified&#34;)
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if context_name not in contexts:
            raise ConfigError(f&#34;active enterprise context not found: {context_name}&#34;)
        return Context(**contexts[context_name])

    def add_context(
        self, name: str, context: &#34;Context&#34;, *, overwrite: bool = False
    ) -&gt; None:
        &#34;&#34;&#34;Add a context to the parsed config.
        The context name must be unique, unless overwrite is True.

        Parameters
        ----------
        name : str
            The name of the context.
        context : Context
            The context object.
        overwrite : bool (kwarg)
            Whether to overwrite an existing context.
        &#34;&#34;&#34;
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if (name in contexts) and not overwrite:
            raise ValueError(f&#39;context &#34;{name}&#34; already exists&#39;)
        contexts[name] = asdict(context)

    def set_active_context(self, name: str) -&gt; None:
        &#34;&#34;&#34;Set the active context to the specified name.
        The context must exist, else a ValueError is raise.

        Parameters
        ----------
        name : str
            The name of the context.
        &#34;&#34;&#34;
        contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
        if name not in contexts:
            raise ValueError(f&#39;context &#34;{name}&#34; does not exist&#39;)
        self._config_file_data[&#34;v2&#34;][&#34;active_context&#34;] = name

    def write(self, config_file: Union[Path, str]) -&gt; None:
        &#34;&#34;&#34;Write the current config data to the specified file.

        Parameters
        ----------
        config_file : str
            The path to the config file.
        &#34;&#34;&#34;
        config_file = Path(os.path.expanduser(config_file)).resolve()
        with config_file.open(&#34;w&#34;) as file_out:
            file_out.write(json.dumps(self._config_file_data, indent=2))
            file_out.write(&#34;\n&#34;)</code></pre>
</details>
<h3>Static methods</h3>
<dl>
<dt id="pachyderm_sdk.config.ConfigFile.from_path"><code class="name flex">
<span>def <span class="ident">from_path</span></span>(<span>config_file: Union[pathlib.Path, str]) ‑> <a title="pachyderm_sdk.config.ConfigFile" href="#pachyderm_sdk.config.ConfigFile">ConfigFile</a></span>
</code></dt>
<dd>
<div class="desc"><p>Parse a Pachyderm config file from a local file.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>config_file</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the config file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def from_path(cls, config_file: Union[Path, str]) -&gt; &#34;ConfigFile&#34;:
    &#34;&#34;&#34;Parse a Pachyderm config file from a local file.

    Parameters
    ----------
    config_file : str
        The path to the config file.
    &#34;&#34;&#34;
    config_file = Path(os.path.expanduser(config_file)).resolve()
    return cls(data=json.loads(config_file.read_bytes()))</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.config.ConfigFile.new_with_context"><code class="name flex">
<span>def <span class="ident">new_with_context</span></span>(<span>name: str, context: <a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a>) ‑> <a title="pachyderm_sdk.config.ConfigFile" href="#pachyderm_sdk.config.ConfigFile">ConfigFile</a></span>
</code></dt>
<dd>
<div class="desc"><p>Create a new ConfigFile object from a single context.
This will also set this specified context as the active context.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the context.</dd>
<dt><strong><code>context</code></strong> :&ensp;<code><a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a></code></dt>
<dd>The context object.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@classmethod
def new_with_context(cls, name: str, context: &#34;Context&#34;) -&gt; &#34;ConfigFile&#34;:
    &#34;&#34;&#34;Create a new ConfigFile object from a single context.
    This will also set this specified context as the active context.

    Parameters
    ----------
    name : str
        The name of the context.
    context : Context
        The context object.
    &#34;&#34;&#34;
    data = dict(
        user_id=str(uuid.uuid4()).replace(&#34;-&#34;, &#34;&#34;),
        v2=dict(
            active_context=name,
            contexts={name: asdict(context)},
            metrics=True,
        ),
    )
    return cls(data)</code></pre>
</details>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="pachyderm_sdk.config.ConfigFile.user_id"><code class="name">var <span class="ident">user_id</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>The user ID of the config file.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def user_id(self) -&gt; Optional[str]:
    &#34;&#34;&#34;The user ID of the config file.&#34;&#34;&#34;
    return self._config_file_data.get(&#34;user_id&#34;)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.config.ConfigFile.active_context"><code class="name">var <span class="ident">active_context</span> : <a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a></code></dt>
<dd>
<div class="desc"><p>The currently-active context.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def active_context(self) -&gt; &#34;Context&#34;:
    &#34;&#34;&#34;The currently-active context.&#34;&#34;&#34;
    active_context_name = self._config_file_data[&#34;v2&#34;][&#34;active_context&#34;]
    contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
    if active_context_name not in contexts:
        raise ConfigError(f&#34;active context not found: {active_context_name}&#34;)
    return Context(**contexts[active_context_name])</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.config.ConfigFile.active_enterprise_context"><code class="name">var <span class="ident">active_enterprise_context</span> : <a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a></code></dt>
<dd>
<div class="desc"><p>The currently-active context that is enterprise-enabled.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def active_enterprise_context(self) -&gt; &#34;Context&#34;:
    &#34;&#34;&#34;The currently-active context that is enterprise-enabled.&#34;&#34;&#34;
    context_name = self._config_file_data[&#34;v2&#34;].get(&#34;active_enterprise_context&#34;)
    if context_name is None:
        raise ConfigError(&#34;active enterprise context is not specified&#34;)
    contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
    if context_name not in contexts:
        raise ConfigError(f&#34;active enterprise context not found: {context_name}&#34;)
    return Context(**contexts[context_name])</code></pre>
</details>
</dd>
</dl>
<h3>Methods</h3>
<dl>
<dt id="pachyderm_sdk.config.ConfigFile.add_context"><code class="name flex">
<span>def <span class="ident">add_context</span></span>(<span>self, name: str, context: <a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a>, *, overwrite: bool = False) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Add a context to the parsed config.
The context name must be unique, unless overwrite is True.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the context.</dd>
<dt><strong><code>context</code></strong> :&ensp;<code><a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a></code></dt>
<dd>The context object.</dd>
<dt><strong><code>overwrite</code></strong> :&ensp;<code>bool (kwarg)</code></dt>
<dd>Whether to overwrite an existing context.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def add_context(
    self, name: str, context: &#34;Context&#34;, *, overwrite: bool = False
) -&gt; None:
    &#34;&#34;&#34;Add a context to the parsed config.
    The context name must be unique, unless overwrite is True.

    Parameters
    ----------
    name : str
        The name of the context.
    context : Context
        The context object.
    overwrite : bool (kwarg)
        Whether to overwrite an existing context.
    &#34;&#34;&#34;
    contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
    if (name in contexts) and not overwrite:
        raise ValueError(f&#39;context &#34;{name}&#34; already exists&#39;)
    contexts[name] = asdict(context)</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.config.ConfigFile.set_active_context"><code class="name flex">
<span>def <span class="ident">set_active_context</span></span>(<span>self, name: str) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Set the active context to the specified name.
The context must exist, else a ValueError is raise.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>name</code></strong> :&ensp;<code>str</code></dt>
<dd>The name of the context.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def set_active_context(self, name: str) -&gt; None:
    &#34;&#34;&#34;Set the active context to the specified name.
    The context must exist, else a ValueError is raise.

    Parameters
    ----------
    name : str
        The name of the context.
    &#34;&#34;&#34;
    contexts = self._config_file_data[&#34;v2&#34;][&#34;contexts&#34;]
    if name not in contexts:
        raise ValueError(f&#39;context &#34;{name}&#34; does not exist&#39;)
    self._config_file_data[&#34;v2&#34;][&#34;active_context&#34;] = name</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.config.ConfigFile.write"><code class="name flex">
<span>def <span class="ident">write</span></span>(<span>self, config_file: Union[pathlib.Path, str]) ‑> None</span>
</code></dt>
<dd>
<div class="desc"><p>Write the current config data to the specified file.</p>
<h2 id="parameters">Parameters</h2>
<dl>
<dt><strong><code>config_file</code></strong> :&ensp;<code>str</code></dt>
<dd>The path to the config file.</dd>
</dl></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">def write(self, config_file: Union[Path, str]) -&gt; None:
    &#34;&#34;&#34;Write the current config data to the specified file.

    Parameters
    ----------
    config_file : str
        The path to the config file.
    &#34;&#34;&#34;
    config_file = Path(os.path.expanduser(config_file)).resolve()
    with config_file.open(&#34;w&#34;) as file_out:
        file_out.write(json.dumps(self._config_file_data, indent=2))
        file_out.write(&#34;\n&#34;)</code></pre>
</details>
</dd>
</dl>
</dd>
<dt id="pachyderm_sdk.config.Context"><code class="flex name class">
<span>class <span class="ident">Context</span></span>
<span>(</span><span>source: Optional[int] = None, pachd_address: Optional[str] = None, server_cas: Optional[str] = None, session_token: Optional[str] = None, active_transaction: Optional[str] = None, cluster_name: Optional[str] = None, auth_info: Optional[str] = None, namespace: Optional[str] = None, cluster_deployment_id: Optional[str] = None, project: Optional[str] = None, enterprise_server: bool = False, port_forwarders: Dict[str, int] = None)</span>
</code></dt>
<dd>
<div class="desc"><p>A context contains all the information needed to connect to a pachyderm
instance. Not all fields need to be present for the context to be valid.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@dataclass
class Context:
    &#34;&#34;&#34;A context contains all the information needed to connect to a pachyderm
    instance. Not all fields need to be present for the context to be valid.&#34;&#34;&#34;

    source: Optional[int] = None
    &#34;&#34;&#34;An integer that specifies where the config came from. 
    This parameter is for internal use only and should not be modified.&#34;&#34;&#34;

    pachd_address: Optional[str] = None
    &#34;&#34;&#34;A host:port specification for connecting to pachd.&#34;&#34;&#34;

    server_cas: Optional[str] = None
    &#34;&#34;&#34;Trusted root certificates for the cluster, formatted as a 
    base64-encoded PEM. This is only set when TLS is enabled.&#34;&#34;&#34;

    session_token: Optional[str] = None
    &#34;&#34;&#34;A secret token identifying the current user within their pachyderm
    cluster. This is included in all RPCs and used to determine if a user&#39;s
    actions are authorized. This is only set when auth is enabled.&#34;&#34;&#34;

    active_transaction: Optional[str] = None
    &#34;&#34;&#34;The currently active transaction for batching together commands.&#34;&#34;&#34;

    cluster_name: Optional[str] = None
    &#34;&#34;&#34;The name of the underlying Kubernetes cluster.&#34;&#34;&#34;

    auth_info: Optional[str] = None
    &#34;&#34;&#34;The name of the underlying Kubernetes cluster’s auth credentials&#34;&#34;&#34;

    namespace: Optional[str] = None
    &#34;&#34;&#34;The underlying Kubernetes cluster’s namespace&#34;&#34;&#34;

    cluster_deployment_id: Optional[str] = None
    &#34;&#34;&#34;The pachyderm cluster deployment ID that is used to ensure the
    operations run on the expected cluster.&#34;&#34;&#34;

    project: Optional[str] = None

    enterprise_server: bool = False
    &#34;&#34;&#34;Whether the context represents an enterprise server.&#34;&#34;&#34;

    port_forwarders: Dict[str, int] = None
    &#34;&#34;&#34;A mapping of service name -&gt; local port.&#34;&#34;&#34;

    @property
    def active_pachd_address(self) -&gt; str:
        &#34;&#34;&#34;This pachd address factors in port-forwarding.&#34;&#34;&#34;
        if self.pachd_address is None:
            port = 30650
            if self.port_forwarders:
                port = self.port_forwarders.get(&#34;pachd&#34;, 30650)
            return f&#34;grpc://localhost:{port}&#34;
        return self.pachd_address

    @property
    def server_cas_decoded(self) -&gt; Optional[bytes]:
        &#34;&#34;&#34;The base64 decoded root certificates in PEM format, if they exist.&#34;&#34;&#34;
        if self.server_cas:
            return b64decode(bytes(self.server_cas, &#34;utf-8&#34;))</code></pre>
</details>
<h3>Class variables</h3>
<dl>
<dt id="pachyderm_sdk.config.Context.source"><code class="name">var <span class="ident">source</span> : Optional[int]</code></dt>
<dd>
<div class="desc"><p>An integer that specifies where the config came from.
This parameter is for internal use only and should not be modified.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.pachd_address"><code class="name">var <span class="ident">pachd_address</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>A host:port specification for connecting to pachd.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.server_cas"><code class="name">var <span class="ident">server_cas</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>Trusted root certificates for the cluster, formatted as a
base64-encoded PEM. This is only set when TLS is enabled.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.session_token"><code class="name">var <span class="ident">session_token</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>A secret token identifying the current user within their pachyderm
cluster. This is included in all RPCs and used to determine if a user's
actions are authorized. This is only set when auth is enabled.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.active_transaction"><code class="name">var <span class="ident">active_transaction</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>The currently active transaction for batching together commands.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.cluster_name"><code class="name">var <span class="ident">cluster_name</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>The name of the underlying Kubernetes cluster.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.auth_info"><code class="name">var <span class="ident">auth_info</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>The name of the underlying Kubernetes cluster’s auth credentials</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.namespace"><code class="name">var <span class="ident">namespace</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>The underlying Kubernetes cluster’s namespace</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.cluster_deployment_id"><code class="name">var <span class="ident">cluster_deployment_id</span> : Optional[str]</code></dt>
<dd>
<div class="desc"><p>The pachyderm cluster deployment ID that is used to ensure the
operations run on the expected cluster.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.project"><code class="name">var <span class="ident">project</span> : Optional[str]</code></dt>
<dd>
<div class="desc"></div>
</dd>
<dt id="pachyderm_sdk.config.Context.enterprise_server"><code class="name">var <span class="ident">enterprise_server</span> : bool</code></dt>
<dd>
<div class="desc"><p>Whether the context represents an enterprise server.</p></div>
</dd>
<dt id="pachyderm_sdk.config.Context.port_forwarders"><code class="name">var <span class="ident">port_forwarders</span> : Dict[str, int]</code></dt>
<dd>
<div class="desc"><p>A mapping of service name -&gt; local port.</p></div>
</dd>
</dl>
<h3>Instance variables</h3>
<dl>
<dt id="pachyderm_sdk.config.Context.active_pachd_address"><code class="name">var <span class="ident">active_pachd_address</span> : str</code></dt>
<dd>
<div class="desc"><p>This pachd address factors in port-forwarding.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def active_pachd_address(self) -&gt; str:
    &#34;&#34;&#34;This pachd address factors in port-forwarding.&#34;&#34;&#34;
    if self.pachd_address is None:
        port = 30650
        if self.port_forwarders:
            port = self.port_forwarders.get(&#34;pachd&#34;, 30650)
        return f&#34;grpc://localhost:{port}&#34;
    return self.pachd_address</code></pre>
</details>
</dd>
<dt id="pachyderm_sdk.config.Context.server_cas_decoded"><code class="name">var <span class="ident">server_cas_decoded</span> : Optional[bytes]</code></dt>
<dd>
<div class="desc"><p>The base64 decoded root certificates in PEM format, if they exist.</p></div>
<details class="source">
<summary>
<span>Expand source code</span>
</summary>
<pre><code class="python">@property
def server_cas_decoded(self) -&gt; Optional[bytes]:
    &#34;&#34;&#34;The base64 decoded root certificates in PEM format, if they exist.&#34;&#34;&#34;
    if self.server_cas:
        return b64decode(bytes(self.server_cas, &#34;utf-8&#34;))</code></pre>
</details>
</dd>
</dl>
</dd>
</dl>
</section>
</article>
<nav id="sidebar">
<header>
<style> img { max-width: 50%; } </style>
<img src="https://raw.githubusercontent.com/pachyderm/pachyderm/master/Pachyderm_Icon-01.svg" alt="">
</header>
<h1>Index</h1>
<div class="toc">
<ul></ul>
</div>
<ul id="index">
<li><h3>Super-module</h3>
<ul>
<li><code><a title="pachyderm_sdk" href="index.html">pachyderm_sdk</a></code></li>
</ul>
</li>
<li><h3><a href="#header-classes">Classes</a></h3>
<ul>
<li>
<h4><code><a title="pachyderm_sdk.config.ConfigFile" href="#pachyderm_sdk.config.ConfigFile">ConfigFile</a></code></h4>
<ul class="">
<li><code><a title="pachyderm_sdk.config.ConfigFile.from_path" href="#pachyderm_sdk.config.ConfigFile.from_path">from_path</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.new_with_context" href="#pachyderm_sdk.config.ConfigFile.new_with_context">new_with_context</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.add_context" href="#pachyderm_sdk.config.ConfigFile.add_context">add_context</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.set_active_context" href="#pachyderm_sdk.config.ConfigFile.set_active_context">set_active_context</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.write" href="#pachyderm_sdk.config.ConfigFile.write">write</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.user_id" href="#pachyderm_sdk.config.ConfigFile.user_id">user_id</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.active_context" href="#pachyderm_sdk.config.ConfigFile.active_context">active_context</a></code></li>
<li><code><a title="pachyderm_sdk.config.ConfigFile.active_enterprise_context" href="#pachyderm_sdk.config.ConfigFile.active_enterprise_context">active_enterprise_context</a></code></li>
</ul>
</li>
<li>
<h4><code><a title="pachyderm_sdk.config.Context" href="#pachyderm_sdk.config.Context">Context</a></code></h4>
<ul class="">
<li><code><a title="pachyderm_sdk.config.Context.active_pachd_address" href="#pachyderm_sdk.config.Context.active_pachd_address">active_pachd_address</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.server_cas_decoded" href="#pachyderm_sdk.config.Context.server_cas_decoded">server_cas_decoded</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.source" href="#pachyderm_sdk.config.Context.source">source</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.pachd_address" href="#pachyderm_sdk.config.Context.pachd_address">pachd_address</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.server_cas" href="#pachyderm_sdk.config.Context.server_cas">server_cas</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.session_token" href="#pachyderm_sdk.config.Context.session_token">session_token</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.active_transaction" href="#pachyderm_sdk.config.Context.active_transaction">active_transaction</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.cluster_name" href="#pachyderm_sdk.config.Context.cluster_name">cluster_name</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.auth_info" href="#pachyderm_sdk.config.Context.auth_info">auth_info</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.namespace" href="#pachyderm_sdk.config.Context.namespace">namespace</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.cluster_deployment_id" href="#pachyderm_sdk.config.Context.cluster_deployment_id">cluster_deployment_id</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.project" href="#pachyderm_sdk.config.Context.project">project</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.enterprise_server" href="#pachyderm_sdk.config.Context.enterprise_server">enterprise_server</a></code></li>
<li><code><a title="pachyderm_sdk.config.Context.port_forwarders" href="#pachyderm_sdk.config.Context.port_forwarders">port_forwarders</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
</main>
<footer id="footer">
<p>Generated by <a href="https://pdoc3.github.io/pdoc" title="pdoc: Python API documentation generator"><cite>pdoc</cite> 0.10.0</a>.</p>
</footer>
</body>
</html>